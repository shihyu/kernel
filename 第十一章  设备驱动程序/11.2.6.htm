<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.kerneltravel.net/kernel-book/第十一章%20%20设备驱动程序/11.2.6.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:01:35 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="11.2.6.files/filelist.html">
<title>DMA</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chsdate" downloadurl=""/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>CLJ</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>CLJ</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>0</o:TotalTime>
  <o:Created>2007-08-17T03:55:00Z</o:Created>
  <o:LastSaved>2007-08-17T03:55:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>295</o:Words>
  <o:Characters>1685</o:Characters>
  <o:Lines>14</o:Lines>
  <o:Paragraphs>3</o:Paragraphs>
  <o:CharactersWithSpaces>1977</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 </w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:;
	mso-hansi-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-font-kerning:1.0pt;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:220363778;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:;
	mso-hansi-font-family:Wingdings;}
@list l1
	{mso-list-id:590086745;
	mso-list-type:simple;
	mso-list-template-ids:1933716978;}
@list l1:level1
	{mso-level-start-at:3;
	mso-level-text:%1;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-36.0pt;}
@list l2
	{mso-list-id:1274094704;
	mso-list-type:simple;
	mso-list-template-ids:1222120224;}
@list l2:level1
	{mso-level-start-at:2;
	mso-level-text:"\(%1\)";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l3
	{mso-list-id:2036075703;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:;
	mso-hansi-font-family:Wingdings;}
@list l4
	{mso-list-id:2078018384;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:;
	mso-hansi-font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:ͨ;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:21.0pt;text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal><st1:chsdate Year="1899" Month="12" Day="30"
IsLunarDate="False" IsROCDate="False" w:st="on"><span lang=EN-US
 style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>11.2.6</span></st1:chsdate><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'><span
lang=EN-US>DMA</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>е<span lang=EN-US>PC</span>һΪֱڴʿ<span
lang=EN-US>DMAC</span>ĸ<span lang=EN-US>RAM</span><span
lang=EN-US>I/O</span>豸֮ݵĴ͡<span lang=EN-US>DMAC</span>һ<span lang=EN-US>CPU</span>Ϳдݣݴ֮<span
lang=EN-US>DMAC</span>һж󡣵<span lang=EN-US>CPU</span><span lang=EN-US>DMAC</span>ͬʱͬһڴ浥ԪʱĳͻһΪڴ<span
class=GramE>ٲ</span>Ӳ·<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>ʹ<span lang=EN-US>DMAC</span>ǴҪһδʹֽڵ豸Ϊ<span
lang=EN-US>DMAC</span>ʱ൱ڴٵʱֱʹ<span lang=EN-US>CPU</span>Чʸߡ<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>ԭ<span lang=EN-US>ISA</span>ʹõĵһ<span
lang=EN-US>DMAC</span>ǳӣڶб̡<span lang=EN-US>PCI</span><span
lang=EN-US>SCSI</span>ʹõ<span lang=EN-US>DMAC</span>еרӲ·ʹ豸򿪷ԱĿü򵥡<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>Ϊֹڴַ߼ַԵַԼַǰ<span
lang=EN-US>CPU</span>ڲʹãһ<span lang=EN-US>CPU</span>õڴַǣеڴַΪߵַǳ<span
lang=EN-US>CPU</span>֮Ӳ豸õڴַ<span lang=EN-US>PC</span>ϵṹУߵַַһµģϵṹУ<span
lang=EN-US>Sun</span><span lang=EN-US>SPARC</span><span lang=EN-US>Compaq</span><span
lang=EN-US>Alpha</span>ϵṹУֵַǲͬġ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:10.5pt;mso-bidi-font-size:10.0pt;
font-weight:normal'>Ӹ˵ںΪʲôӦùߵַأΪ<span lang=EN-US>DMA</span>ݴͲ<span
lang=EN-US>CPU</span>Ĳ룺<span lang=EN-US>I/O</span>豸<span lang=EN-US>DMAC</span>ֱߡˣں˿ʼ<span
lang=EN-US>DMA</span>ʱ漰ڴ滺ߵַд<span lang=EN-US>DMAC</span>ʵ<span
lang=EN-US>I/O</span>˿ڡд<span lang=EN-US>I/O</span>豸ʵ<span lang=EN-US>I/O</span>˿ڡ<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>ܶ<span lang=EN-US>I/O</span>ʹֱڴʿ<span
lang=EN-US>DMAC</span>ӿٶȡ<span lang=EN-US>DMAC</span>豸<span
lang=EN-US>I/O</span>໥ùͬʵݴͣǻῴںаһõ<span lang=EN-US>DMAC</span>б̡ݴʱ<span
lang=EN-US>I/O</span>ͨ<span lang=EN-US>IRQ</span><span lang=EN-US>CPU</span>źš<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>豸Ϊĳ<span lang=EN-US>I/O</span>豸<span
lang=EN-US>DMA</span>ʱʹߵַָõڴ滺ںṩ<span lang=EN-US>virt_to_bus</span><span
lang=EN-US>bus_to_virt</span>ֱַתߵַߵַתַ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'><span lang=EN-US>IRQ</span>һ<span
lang=EN-US>DMAC</span>ҲһԴԴ̬طҪ豸ʼͽ<span lang=EN-US>DMA</span>ķߵ͡<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>1.ISA</span><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>ߵ<span lang=EN-US>DMA<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>ÿ<span lang=EN-US>ISA DMAC</span>ֻܿ<span
class=GramE></span>ͨÿͨһڲĴԣ<span lang=EN-US>DMAC</span>ͿͬʱƼݵĴ͡<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'>豸ͨʹķʽͷ<span
lang=EN-US>ISA DMAC</span>豸Ҫһüʲôʱκν̶ٷ豸ļִ²<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='tab-stops:list 42.5pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>(1) </span><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>豸ļ<span
lang=EN-US>open( )</span>а豸ü<span lang=EN-US>1</span>ԭֵ<span
lang=EN-US>0</span>ôִ²<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo2;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>request_irq( )</span><span
lang=EN-US>ISA DMAC</span>ʹõ<span lang=EN-US>IRQ</span>жϺ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo2;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>request_dma( )</span><span
lang=EN-US>DMA</span>ͨ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo2;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>֪ͨӲ豸Ӧʹ<span lang=EN-US>DMA</span>ж<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo2;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>ҪΪ<span lang=EN-US>DMA</span>һ洢<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l2 level1 lfo1;
tab-stops:list 18.0pt 42.5pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-bidi-font-family:;
font-weight:normal'><span style='mso-list:Ignore'>(2)<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span class=GramE><span style='font-size:10.5pt;
mso-bidi-font-size:10.0pt;font-weight:normal'></span></span><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'><span
lang=EN-US>DMA</span>ʱ豸ļ<span lang=EN-US>read</span><span lang=EN-US>write</span>ִ²<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>set_dma_mode( )</span>ͨ<span
class=GramE>óɶ</span><span lang=EN-US>/</span>дģʽ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>set_dma_addr( )</span><span
lang=EN-US>DMA</span>ߵַΪֻ͵<span lang=EN-US>24</span>λַᷢ<span
lang=EN-US>DMAC</span>Ի<span lang=EN-US>RAM</span>ǰ<span lang=EN-US>16MB</span>С<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>set_dma_count( )</span>Ҫ͵ֽ<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>set_dma_dma( )</span><span
lang=EN-US>DMA</span>ͨ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>ѵǰ̼豸ĵȴУ𡣵<span lang=EN-US>DMAC</span>ݴͲʱ豸<span
lang=EN-US>I/O</span>ͷһжϣӦжϴỽ˯ߵĽ̡<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>һѣ<span lang=EN-US>disable_dma( )</span><span
lang=EN-US>DMA</span>ͨ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo3;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>get_dma_residue( )</span>Ƿеݶѱ͡<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:36.0pt;text-indent:-36.0pt;mso-list:l1 level1 lfo4;
tab-stops:list 36.0pt 42.5pt'><![if !supportLists]><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-bidi-font-family:;
font-weight:normal'><span style='mso-list:Ignore'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>豸ļ<span lang=EN-US>release</span>У豸ü<span
class=GramE>ֵ</span><span lang=EN-US>0</span>ִ²<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo5;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>DMA</span>ͶӲ豸ϵӦж<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo5;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>free_dma( )</span>ͷ<span
lang=EN-US>DMA</span>ͨ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo5;tab-stops:list 21.25pt 63.75pt'><![if !supportLists]><span
lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:10.0pt;mso-hansi-font-family:
Wingdings;mso-bidi-font-family:;font-weight:normal'><span style='mso-list:
Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>free_irq( )</span>ͷ<span
lang=EN-US>DMA</span>ʹõ<span lang=EN-US>IRQ</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'>2</span><span style='font-size:10.5pt;mso-bidi-font-size:
10.0pt;font-weight:normal'><span lang=EN-US>PCI</span>ߵ<span lang=EN-US>DMA<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>PCI</span><span
style='font-size:10.5pt;mso-bidi-font-size:10.0pt;font-weight:normal'>߶<span
lang=EN-US>DMA</span>ʹҪ򵥵ö࣬Ϊ<span lang=EN-US>DMAC</span>Ǽɵ<span
lang=EN-US>I/O</span>ӿڲġ<span lang=EN-US>open</span>У豸һ<span
lang=EN-US>IRQ</span>֪ͨ<span lang=EN-US>DMA</span>ɡǣûбҪһ<span
lang=EN-US>DMA</span>ͨΪÿӲ豸ֱӿ<span lang=EN-US>PCI</span>ߵĵźšҪ<span
lang=EN-US>DMA</span>豸Ӳ豸ĳ<span lang=EN-US>I/O</span>˿м򵥵д<span
lang=EN-US>DMA</span>ߵַͷԼݴСȻ͹ǰ̡һ̹رļʱ<span
lang=EN-US>release</span>ͷ<span lang=EN-US>IRQ</span>ߡ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>


<!-- Mirrored from www.kerneltravel.net/kernel-book/第十一章%20%20设备驱动程序/11.2.6.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:01:36 GMT -->
</html>
