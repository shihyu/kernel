<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.kerneltravel.net/kernel-book/ç¬¬åç« %20æ¨¡å—æœºåˆ¶/10.2.2.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:01:26 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="10.2.2.files/filelist.html">
<title>ÊµÏÖ»úÖÆµÄ·ÖÎö</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chsdate" downloadurl=""/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>CLJ</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>CLJ</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>0</o:TotalTime>
  <o:Created>2007-08-16T14:50:00Z</o:Created>
  <o:LastSaved>2007-08-16T14:50:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1405</o:Words>
  <o:Characters>8013</o:Characters>
  <o:Lines>66</o:Lines>
  <o:Paragraphs>18</o:Paragraphs>
  <o:CharactersWithSpaces>9400</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 °õ</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:ËÎÌå;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@ËÎÌå";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:ËÎÌå;
	mso-font-kerning:1.0pt;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:652566817;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l1
	{mso-list-id:1338733422;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l2
	{mso-list-id:1800342392;
	mso-list-type:simple;
	mso-list-template-ids:1121509090;}
@list l2:level1
	{mso-level-text:£¨%1£©;
	mso-level-tab-stop:46.2pt;
	mso-level-number-position:left;
	margin-left:46.2pt;
	text-indent:-25.8pt;}
@list l3
	{mso-list-id:1895922236;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l4
	{mso-list-id:2004777102;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:ÆÕÍ¨±í¸ñ;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:21.0pt;text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><st1:chsdate Year="1899" Month="12" Day="30"
IsLunarDate="False" IsROCDate="False" w:st="on"><b style='mso-bidi-font-weight:
 normal'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
 color:black;mso-font-kerning:0pt'>10.2.2</span></b></st1:chsdate><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'> </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>ÊµÏÖ»úÖÆµÄ·ÖÎö<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>µ±ÄãĞÂ½¨Á¢ÁË×îĞ¡ÄÚºË<span
lang=EN-US>(</span>ÈçºÎ½¨Á¢ĞÂÄÚºË£¬Çë¿´Ïà¹ØµÄ<span lang=EN-US>HOWTO)</span>£¬²¢ÇÒÖØĞÂÆô¶¯ºó£¬Äã¿ÉÒÔÀûÓÃÊµÓÃ³ÌĞò<span
lang=EN-US>&quot;insmod&quot;</span>ºÍ<span lang=EN-US>&quot;rmmod&quot;</span>£¬ËæÒâµØ¸øÄÚºË²åÈë»ò´ÓÄÚºËÖĞÒÆ×ßÄ£¿é¡£Èç¹û<span
lang=EN-US>kerneld</span>ÊØ»¤½ø³ÌÆô¶¯£¬ÔòÓÉ<span lang=EN-US>kerneld</span>×Ô¶¯Íê³ÉÄ£¿éµÄ²å°Î¡£ÓĞ¹ØÄ£¿éÊµÏÖµÄÔ´´úÂëÔÚ<span
lang=EN-US> /kernel/module.c</span>ÖĞ£¬ÒÔÏÂÊÇ¶ÔÔ´´úÂëÖĞÖ÷Òªº¯ÊıµÄ·ÖÎö¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>1</span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>£® Æô¶¯Ê±ÄÚºËÄ£¿éµÄ³õÊ¼»¯º¯Êı<span lang=EN-US>-- init_modules()<o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>µ±ÄÚºËÆô¶¯Ê±£¬Òª½øĞĞºÜ¶à³õÊ¼»¯¹¤×÷£¬ÆäÖĞ£¬¶ÔÄ£¿éµÄ³õÊ¼»¯ÊÇÔÚ<span
lang=EN-US>main.c</span>ÖĞµ÷ÓÃ<span lang=EN-US>init_modules()</span>º¯ÊıÍê³ÉµÄ¡£Êµ¼ÊÉÏ£¬µ±ÄÚºËÆô¶¯Ê±Î¨Ò»µÄÄ£¿é¾ÍÎªÄÚºË±¾Éí£¬Òò´Ë£¬³õÊ¼»¯Òª×öµÄÎ¨Ò»¹¤×÷¾ÍÊÇÇó³öÄÚºË·ûºÅ±íÖĞ·ûºÅµÄ¸öÊı£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>*</span><span style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>£¯<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>* Called at
boot time<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>*/<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span class=GramE><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>void</span></span><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'> __init init_modules(void)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>{<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>kernel_module.nsyms = __stop___ksymtab - __start___ksymtab;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>arch_init_<span class=GramE>modules(</span>&amp;kernel_module);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span></span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÒòÎªÄÚºË´úÂë±»±àÒëÒÔºó£¬Á¬½Ó³ÌĞò½øĞĞÁ¬½ÓÊ±ÄÚºË·ûºÅµÄ·ûºÅ½á¹¹¾Í¡°ÒÆ³ö¡±µ½ÁË<span lang=EN-US>ksymtab</span>Çø¶Î£¬<span
lang=EN-US>__start___ksymtab</span>ÎªµÚÒ»¸öÄÚºË·ûºÅ½á¹¹µÄµØÖ·£¬<span lang=EN-US>__stop___ksymtab</span>Îª×îºóÒ»¸öÄÚºË·ûºÅ½á¹¹µÄµØÖ·£¬Òò´Ë¶şÕßÖ®²îÎªÄÚºË·ûºÅµÄ¸öÊı¡£ÆäÖĞ£¬<span
lang=EN-US>arch_init_modules</span>ÊÇÓëÌåÏµ½á¹¹Ïà¹ØµÄº¯Êı£¬¶Ô<span lang=EN-US>i386</span>À´Ëµ£¬<span
lang=EN-US>arch_init_modules</span>ÔÚ<span lang=EN-US>include/i386/module.h</span>ÖĞ¶¨ÒåÎª£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>#define arch_init_modules(x)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>do { } while (0)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>¿É¼û£¬¶Ô<span
lang=EN-US>i386</span>À´Ëµ£¬Õâ¸öº¯ÊıÎª¿Õ¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>2. </span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>´´½¨Ò»¸öĞÂÄ£¿é<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>µ±ÓÃ<span lang=EN-US>insmod</span>¸øÄÚºËÖĞ²åÈëÒ»¸öÄ£¿éÊ±£¬ÒâÎ¶×ÅÏµÍ³Òª´´½¨Ò»¸öĞÂµÄÄ£¿é£¬¼´ÎªÒ»¸öĞÂµÄÄ£¿é·ÖÅä¿Õ¼ä£¬º¯Êı<span
lang=EN-US>sys_create_module()</span>Íê³É´Ë¹¦ÄÜ£¬¸Ãº¯ÊıÒ²ÊÇÏµÍ³µ÷ÓÃ<span lang=EN-US>screate_module</span>£¨£©ÔÚÄÚºËµÄÊµÏÖº¯Êı£¬Æä´úÂëÈçÏÂ£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>/*<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>* Allocate
space for a module.<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>*/<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span class=GramE><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>asmlinkage</span></span><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'> unsigned long<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>sys_create_<span class=GramE>module(</span>const char
*name_user, size_t size)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>{<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>char</span> *name;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>long</span> namelen, error;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>struct</span> module *mod;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> long flags;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!capable(CAP_SYS_MODULE))<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> -EPERM;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>lock_<span class=GramE>kernel(</span>);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> ((namelen = get_mod_name(name_user,
&amp;name)) &lt; 0) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>error</span> = namelen;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> err0;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (size &lt; sizeof(struct module)+namelen) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>error</span> = -EINVAL;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> err1;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (find_module(name) != NULL) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>error</span> = -EEXIST;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> err1;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> ((mod = (struct module *)module_map(size)) == NULL) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>error</span> = -ENOMEM;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> err1;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>memset(</span>mod, 0, sizeof(*mod));<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>mod</span>-&gt;size_of_struct = sizeof(*mod);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>mod</span>-&gt;name = (char *)(mod + 1);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>mod</span>-&gt;size = size;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=GramE>memcpy(</span>(char*)(mod+1), name, namelen+1);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>put_mod_<span class=GramE>name(</span>name);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_lock_<span class=GramE>irqsave(</span>&amp;modlist_lock, flags);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>mod</span>-&gt;next = module_list;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>module_list = mod;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* link it in */<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_unlock_<span class=GramE>irqrestore(</span>&amp;modlist_lock,
flags);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>error</span> = (long) mod;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> err0;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>err1:<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>put_mod_<span class=GramE>name(</span>name);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>err0:<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>unlock_<span class=GramE>kernel(</span>);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> error;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÏÂÃæ¶Ô¸Ãº¯ÊıÖĞµÄÖ÷ÒªÓï¾ä¸øÓè½âÊÍ¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>capable(CAP_SYS_MODULE)</span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>¼ì²éµ±Ç°½ø³ÌÊÇ·ñÓĞ´´½¨Ä£¿éµÄÌØÈ¨¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>²ÎÊı<span lang=EN-US>size</span>±íÊ¾Ä£¿éµÄ´óĞ¡£¬ËüµÈÓÚ<span
lang=EN-US>module</span>½á¹¹µÄ´óĞ¡¼ÓÉÏÄ£¿éÃûµÄ´óĞ¡£¬ÔÙ¼ÓÉÏÄ£¿éÓ³ÏñµÄ´óĞ¡£¬ÏÔÈ»£¬<span lang=EN-US>size</span>²»ÄÜĞ¡ÓÚºóÁ½ÏîÖ®<span
class=GramE>ºÍ</span>¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>get_mod_name</span><span style='font-family:
ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>£¨£©º¯Êı»ñµÃÄ£¿éÃûµÄ³¤¶È¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>find_module</span><span style='font-family:
ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>£¨£©º¯Êı¼ì²éÊÇ·ñ´æÔÚÍ¬ÃûµÄÄ£¿é£¬ÒòÎªÄ£¿éÃûÊÇÄ£¿éµÄÎ¨Ò»±êÊ¶¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>µ÷ÓÃ<span lang=EN-US>module_map</span>£¨£©·ÖÅä¿Õ¼ä£¬¶Ô<span
lang=EN-US>i386</span>À´Ëµ£¬¾ÍÊÇµ÷ÓÃ<span lang=EN-US>vmalloc()</span>º¯Êı´ÓÄÚºË¿Õ¼äµÄ·ÇÁ¬ĞøÇø·ÖÅä¿Õ¼ä¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>memset</span><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>£¨£©½«·ÖÅä¸ø<span
lang=EN-US>module</span>½á¹¹µÄ¿Õ¼äÈ«²¿Ìî³äÎª<span lang=EN-US>0</span>£¬Ò²¾ÍÊÇËµ£¬°ÑÍ¨¹ı<span
lang=EN-US>module_map</span>£¨£©Ëù·ÖÅä¿Õ¼äµÄ¿ªÍ·²¿·Ö¸øÁË<span lang=EN-US>module</span>½á¹¹£»È»ºó£¨<span
lang=EN-US>module+1</span>£©±íÊ¾´Ó<span lang=EN-US>mod</span>ËùÖ¸µÄµØÖ·¼ÓÉÏÒ»¸ö<span
lang=EN-US>module</span>½á¹¹µÄ´óĞ¡£¬ÔÚ´Ë´¦·ÅÉÏÄ£¿éµÄÃû×Ö£»×îºó£¬Ê£ÓàµÄ¿Õ¼ä¸øÄ£¿éÓ³Ïñ¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ĞÂ½¨<span lang=EN-US>moudle</span>½á¹¹Ö»Ìî³äÁËÈı¸öÖµ£¬ÆäÓàÖµÓĞ´ıÓÚ´ÓÓÃ»§¿Õ¼ä´«µİ¹ıÀ´¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>put_mod_name()</span><span style='font-family:
ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÊÍ·Å¾Ö²¿±äÁ¿<span
lang=EN-US>name</span>ËùÕ¼µÄ¿Õ¼ä¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l1 level1 lfo1;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>½«ĞÂ´´½¨µÄ<span class=GramE>Ä£¿é½á¹¹Á´Èë</span><span lang=EN-US>module_list</span>Á´±íµÄÊ×²¿¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>3. </span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>³õÊ¼»¯Ò»¸öÄ£¿é<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>´ÓÉÏÃæ¿ÉÒÔ¿´³ö£¬<span
lang=EN-US>sys_create_module</span>£¨£©º¯Êı½ö½öÔÚÄÚºËÎªÄ£¿é¿ª±ÙÁËÒ»¿é¿Õ¼ä£¬µ«ÊÇÄ£¿éµÄ´úÂë¸ù±¾Ã»ÓĞ¿½±´¹ıÀ´¡£Êµ¼ÊÉÏ£¬Ä£¿éµÄÕæÕı°²×°¹¤×÷¼°ÆäËûµÄÒ»Ğ©³õÊ¼»¯¹¤×÷ÓÉ<span
lang=EN-US>sys_init_module()</span>º¯ÊıÍê³É£¬¸Ãº¯Êı¾ÍÊÇÏµÍ³µ÷ÓÃ<span lang=EN-US>init_module()</span>ÔÚÄÚºËµÄÊµÏÖ´úÂë£¬ÒòÎªÆä´úÂë±È½Ï³¤£¬Îª´Ë¶Ô¸Ãº¯ÊıµÄÖ÷ÒªÊµÏÖ¹ı³Ì¸øÓèÃèÊö¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>¸Ãº¯ÊıµÄÔ­ĞÍÎª£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span class=GramE><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>asmlinkage</span></span><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'> long sys_init_module(const char *name_user, struct
module *mod_user)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÆäÖĞ²ÎÊı<span
lang=EN-US>name_user</span>ÎªÓÃ»§¿Õ¼äµÄÄ£¿éÃû£¬<span lang=EN-US>mod_user</span>ÎªÖ¸ÏòÓÃ»§¿Õ¼äÓû°²×°Ä£¿éµÄ<span
lang=EN-US>module</span>½á¹¹¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>¸Ãº¯ÊıµÄÖ÷Òª²Ù×÷ÃèÊöÈçÏÂ£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>sys_create_module</span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>£¨£©ÔÚÄÚºË¿Õ¼ä´´½¨ÁËÄ¿±êÄ£¿éµÄ<span lang=EN-US>module</span>½á¹¹£¬µ«ÊÇÕâ¸ö½á¹¹»¹»ù±¾Îª¿Õ£¬ÆäÄÚÈİÖ»ÄÜÀ´×ÔÓÃ»§¿Õ¼ä¡£Òò´Ë£¬³õÊ¼»¯º¯Êı¾ÍÒª°ÑÓÃ»§¿Õ¼äµÄ<span
lang=EN-US>module</span>½á¹¹¿½±´µ½ÄÚºËÖĞ¶ÔÓ¦µÄ<span lang=EN-US>module</span>½á¹¹ÖĞ¡£µ«ÊÇ£¬ÓÉÓÚÄÚºË°æ±¾ÔÚ²»¶Ï±ä»¯£¬Òò´ËÓÃ»§¿Õ¼ä<span
lang=EN-US>module</span>½á¹¹¿ÉÄÜÓëÄÚºËÖĞµÄ<span lang=EN-US>module</span>½á¹¹²»ÍêÈ«Ò»Ñù£¬ÀıÈçÓÃ»§¿Õ¼äµÄ<span
lang=EN-US>module</span>½á¹¹Îª<span lang=EN-US>2.2</span>°æ£¬¶øÄÚºË¿Õ¼äµÄÎª<span
lang=EN-US>2.4</span>°æ£¬Ôò¶şÕßµÄ<span lang=EN-US>module</span>½á¹¹¾ÍÓĞËù²»Í¬¡£ÎªÁË·ÀÖ¹¶şÕßµÄ<span
lang=EN-US>module</span>½á¹¹ÔÚ´óĞ¡ÉÏµÄ²»Ò»ÖÂ¶øÔì³ÉÂé·³£¬Òò´Ë£¬Ê×ÏÈÒª°ÑÓÃ»§¿Õ¼äµÄ<span lang=EN-US>module</span>½á¹¹ÖĞµÄ<span
lang=EN-US>size_of_struct</span>Óò¸´ÖÆ¹ıÀ´¼ÓÒÔ¼ì²é¡£´ÓÇ°Ãæ½éÉÜµÄ<span lang=EN-US>module</span>½á¹¹¿ÉÒÔ¿´³ö£¬<span
lang=EN-US>2.4</span>°æÖĞ´Ó<span lang=EN-US>persist_start</span>¿ªÊ¼µÄÓòÊÇÄÚºË¶Ô<span
lang=EN-US>module</span>½á¹¹µÄÀ©³ä£¬ÓÃ»§¿Õ¼äµÄ<span lang=EN-US>module</span>½á¹¹ÖĞÃ»ÓĞÕâĞ©Óò£¬Òò´Ë¶şÕß<span
lang=EN-US>module</span>½á¹¹´óĞ¡µÄ¼ì²é²»°üÀ¨À©³äÓò¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Í¨¹ıÁË¶Ô½á¹¹´óĞ¡µÄ¼ì²éÒÔºó£¬ÏÈ°ÑÄÚºËÖĞµÄ<span lang=EN-US>module</span>½á¹¹±£´æÔÚ¶ÑÕ»ÖĞ×÷Îªºó±¸£¬È»ºó¾Í´ÓÓÃ»§¿Õ¼ä¿½±´Æä<span
lang=EN-US>module</span>½á¹¹¡£¸´ÖÆÊ±ÊÇÒÔÄÚºËÖĞ<span lang=EN-US>module</span>½á¹¹µÄ´óĞ¡Îª×¼µÄ£¬ÒÔÃâÆÆ»µÄÚºËÖĞµÄÄÚ´æ¿Õ¼ä¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>¸´ÖÆ¹ıÀ´ÒÔºó£¬»¹Òª¼ì²é<span lang=EN-US>module</span>½á¹¹ÖĞ¸÷¸öÓòµÄºÏÀíĞÔ¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>×îºó£¬»¹Òª¶ÔÄ£¿éÃû½øĞĞ½øÒ»²½µÄ¼ì²é¡£ËäÈ»ÒÑ¾­¸ù¾İ²ÎÊı<span lang=EN-US>name_user</span>´ÓÓÃ»§¿Õ¼ä¿½±´¹ıÀ´ÁËÄ£¿éÃû£¬µ«ÊÇÕâ¸öÄ£¿éÃûÊÇ·ñÓëÓÃ»§¿Õ¼ä<span
lang=EN-US>module</span>½á¹¹ÖĞËùÖ¸Ê¾µÄÄ£¿éÃûÒ»ÖÂÄØ£¿ÏÔÈ»£¬Ò²¿ÉÄÜ´æÔÚ²»Ò»ÖÂµÄ¿ÉÄÜ£¬Òò´Ë»¹Òª¸ù¾İ<span lang=EN-US>module</span>½á¹¹µÄÄÚÈİ°ÑÄ£¿éÓ³ÏñÖĞµÄÄ£¿éÃûÒ²¸´ÖÆ¹ıÀ´£¬ÔÙÓëÔ­À´Ê¹ÓÃµÄÄ£¿éÃû½øĞĞ±È½Ï¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>¾­¹ıÒÔÉÏ¼ì²éÒÔºó£¬¿ÉÒÔ´ÓÓÃ»§¿Õ¼ä°ÑÄ£¿éµÄÓ³Ïñ¸´ÖÆ¹ıÀ´ÁË¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>µ«ÊÇ°ÑÄ£¿éÓ³Ïñ¸´ÖÆ¹ıÀ´²¢²»ÊÇÍòÊÂ´ó¼ª£¬Ä£¿éÖ®¼äµÄÒÀÀµ¹ØÏµ»¹µÃ½øĞĞĞŞÕı£¬ÒòÎªÕıÔÚ°²×°µÄÄ£¿é¿ÉÄÜÒªÒıÓÃÆäËûÄ£¿éÖĞµÄ·ûºÅ¡£ËäÈ»ÔÚÓÃ»§¿Õ¼äÒÑ¾­Íê³ÉÁË¶ÔÕâĞ©·ûºÅµÄÁ¬½Ó<span
lang=EN-US>,</span>µ«ÏÖÔÚ±ØĞëÑéÖ¤ËùÒÀÀµµÄÄ£¿éÔÚÄÚºËÖĞ»¹Î´±»Ğ¶ÔØ¡£Èç¹ûËùÒÀÀµµÄÄ£¿éÒÑ¾­²»ÔÚÄÚºËÖĞÁË£¬Ôò¶ÔÄ¿±êÄ£¿éµÄ°²×°¾ÍÊ§°ÜÁË¡£ÔÚÕâÖÖÇé¿öÏÂ£¬Ó¦ÓÃ³ÌĞò£¨ÀıÈç<span
lang=EN-US>insmod</span>£©ÓĞÔğÈÎÍ¨¹ıÏµÍ³µ÷ÓÃ<span lang=EN-US>delete_module()</span>½«ÒÑ¾­´´½¨µÄ<span
lang=EN-US>module</span>½á¹¹´Ó<span lang=EN-US>moudle_list</span>ÖĞÉ¾³ı¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:21.25pt;text-align:left;
text-indent:-21.25pt;mso-list:l0 level1 lfo2;tab-stops:list 21.25pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÖÁ´Ë£¬Ä£¿éµÄ°²×°ÒÑ¾­»ù±¾Íê³É£¬µ«»¹ÓĞÒ»¼şÊÂÒª×ö£¬ÄÇ¾ÍÊÇÆô¶¯´ıÖ´ĞĞÄ£¿éµÄ<span lang=EN-US>init_moudle</span>£¨£©º¯Êı£¬Ã¿¸öÄ£¿é<span
class=GramE>¿é</span>±ØĞëÓĞÒ»¸öÕâÑùµÄº¯Êı£¬<span lang=EN-US>module</span>½á¹¹ÖĞµÄº¯ÊıÖ¸Õë<span
lang=EN-US>init</span>¾ÍÖ¸ÏòÕâ¸öº¯Êı£¬ÄÚºË¿ÉÒÔÍ¨¹ıÕâ¸öº¯Êı·ÃÎÊÄ£¿éÖĞµÄ±äÁ¿ºÍº¯Êı£¬»òÕßËµ£¬<span lang=EN-US>init_moudle</span>£¨£©ÊÇÄ£¿éµÄÈë¿Ú£¬¾ÍºÃÏñÃ¿¸ö¿ÉÖ´ĞĞ³ÌĞòµÄÈë¿Ú¶¼ÊÇ<span
lang=EN-US>main()</span>Ò»Ñù¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>4</span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>£®Ğ¶ÔØÄ£¿éµÄº¯Êı<span lang=EN-US>--sys_delete_module()<o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Ğ¶ÔØÄ£¿éµÄÏµÍ³µ÷ÓÃÎª<span lang=EN-US>delete_module()</span>£¬ÆäÄÚºËµÄÊµÏÖº¯ÊıÎª<span
lang=EN-US>sys_delete_module()</span>£¬¸Ãº¯ÊıµÄÔ­ĞÍÎª£º<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span class=GramE>asmlinkage</span>
long<span style='mso-spacerun:yes'>&nbsp; </span>sys_delete_module(const char
*name_user)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:20.4pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÓëÇ°Ãæ¼¸¸öÏµÍ³µ÷ÓÃÒ»Ñù£¬Ö»ÓĞÌØÈ¨ÓÃ»§²ÅÔÊĞíĞ¶ÔØÄ£¿é¡£Ğ¶ÔØÄ£¿éµÄ·½Ê½ÓĞÁ½ÖÖ£¬ÕâÈ¡¾öÓÚ²ÎÊı<span
lang=EN-US>name_user, name_user</span>ÊÇÓÃ»§¿Õ¼äÖĞµÄÄ£¿éÃû¡£Èç¹û<span lang=EN-US>name_user</span>·Ç¿Õ£¬±íÊ¾Ğ¶ÔØÒ»¸öÖ¸¶¨µÄÄ£¿é£»Èç¹ûÎª¿Õ£¬ÔòĞ¶ÔØËùÓĞ¿ÉÒÔĞ¶ÔØµÄÄ£¿é¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:46.2pt;text-align:left;
text-indent:-25.8pt;mso-list:l2 level1 lfo3;tab-stops:list 46.2pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>£¨1£©<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>Ğ¶ÔØÖ¸¶¨µÄÄ£¿é<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:20.4pt;text-align:left;
text-indent:20.4pt;mso-layout-grid-align:none;text-autospace:none'><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Ò»¸öÄ£¿éÄÜ·ñĞ¶ÔØ£¬Ê×ÏÈÒª¿´ÄÚºËÖĞÊÇ·ñ»¹ÓĞÆäËûÄ£¿éÒÀÀµ¸ÃÄ£¿é£¬Ò²¾ÍÊÇ¸ÃÄ£¿éÖĞµÄ·ûºÅÊÇ·ñ±»ÒıÓÃ£¬¸ü¾ßÌåµØËµ£¬¾ÍÊÇ¼ì²é¸ÃÄ£¿éµÄ<span
lang=EN-US>refs</span>Ö¸ÕëÊÇ·ñÎª¿Õ¡£´ËÍâ£¬»¹ÒªÅĞ¶Ï¸ÃÄ£¿éÊÇ·ñÔÚÊ¹ÓÃÖĞ£¬¼´<span lang=EN-US>__MOD_IN_USE</span>£¨£©ºêµÄÖµÊÇ·ñÎª<span
lang=EN-US>0</span>¡£Ö»ÓĞÎ´±»ÒÀÀµÇÒÎ´±»Ê¹ÓÃµÄÄ£¿é²Å¿ÉÒÔĞ¶ÔØ¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:20.4pt;text-align:left;
text-indent:20.4pt;mso-layout-grid-align:none;text-autospace:none'><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Ğ¶ÔØÄ£¿éÊ±Ö÷Òª<span class=GramE>Òª</span>µ÷ÓÃÄ¿±êÄ£¿éµÄ<span lang=EN-US>cleanup_module()</span>º¯Êı£¬¸Ãº¯Êı³·ÏúÄ£¿éÔÚÄÚºËÖĞµÄ×¢²á£¬Ê¹ÏµÍ³²»ÔÙÄÜÒıÓÃ¸ÃÄ£¿é¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:20.4pt;text-align:left;
text-indent:20.4pt;mso-layout-grid-align:none;text-autospace:none'><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Ò»¸öÄ£¿éµÄ²ğ³ıÓĞ¿ÉÄÜÊ¹ËüËùÒÀÀµµÄÄ£¿é»ñµÃ×ÔÓÉ£¬Ò²¾ÍÊÇËµ£¬ËüËùÒÀÀµµÄÄ£¿éÆä<span lang=EN-US>refs</span>¶ÓÁĞ±äÎª¿Õ£¬Ò»¸ö<span
lang=EN-US>refs</span>¶ÓÁĞÎª¿ÕµÄÄ£¿é¾ÍÊÇÒ»¸ö×ÔÓÉÄ£¿é£¬Ëü²»ÔÙ±»ÈÎºÎÄ£¿éËùÒÀÀµ¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:46.2pt;text-align:left;
text-indent:-25.8pt;mso-list:l2 level1 lfo3;tab-stops:list 46.2pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>£¨2£©<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>Ğ¶ÔØËùÓĞ¿ÉÒÔĞ¶ÔØµÄÄ£¿é<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:46.2pt;text-align:left;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>Èç¹û²ÎÊı<span
lang=EN-US>name_user</span>Îª¿Õ£¬ÔòĞ¶ÔØÍ¬Ê±Âú×ãÒÔÏÂÌõ¼şµÄËùÓĞÄ£¿é£º<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>²»ÔÙ±»ÈÎºÎÄ£¿éËùÒÀÀµ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÔÊĞí×Ô¶¯Ğ¶ÔØ£¬¼´°²×°Ê±´øÓĞ<span lang=EN-US>MOD_AUTOCLEAN</span>±êÖ¾Î»¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÒÑ¾­°²×°µ«ÉĞÎ´±»Ğ¶ÔØ£¬¼´´¦ÓÚÔËĞĞ×´Ì¬¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÉĞÎ´±»¿ªÊ¼Ğ¶ÔØ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>°²×°ÒÔºó±»ÒıÓÃ¹ı<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:62.65pt;text-align:left;
text-indent:-21.25pt;mso-list:l4 level1 lfo4;tab-stops:list 62.65pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÒÑ²»ÔÙÊ¹ÓÃ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÒÔÉÏ½éÉÜÁË<span lang=EN-US>init_module</span>£¨£©¡¢<span
lang=EN-US>create_module</span>£¨£©¡¢<span lang=EN-US>delete_module()</span>Èı¸öÏµÍ³µ÷ÓÃÔÚÄÚºËµÄÊµÏÖ»úÖÆ£¬»¹ÓĞÒ»¸ö²éÑ¯Ä£¿éÃûµÄÏµÍ³µ÷ÓÃ<span
lang=EN-US>query_module()</span>¡£Õâ¼¸¸öÏµÍ³µ÷ÓÃÊÇÔÚÊµÏÖ<span lang=EN-US>insmod</span>¼°<span
lang=EN-US>rmmod</span>ÊµÓÃ³ÌĞòµÄ¹ı³ÌÖĞ±»µ÷ÓÃµÄ£¬ÓÃ»§¿ª·¢µÄ³ÌĞòÒ»°ã²»Ó¦¸Ã¡¢Ò²²»±ØÒªÖ±½Óµ÷ÓÃÕâĞ©ÏµÍ³µ÷ÓÃ¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'>5. </span><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>×°ÈëÄÚºËÄ£¿é¡ª<span lang=EN-US>request_module()</span>º¯Êı<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÔÚÓÃ»§Í¨¹ı<span
lang=EN-US>insmod</span>°²×°Ä£¿éµÄ¹ı³ÌÖĞ£¬ÄÚºËÊÇ±»¶¯µØ½ÓÊÜÓÃ»§·¢³öµÄ°²×°ÇëÇó¡£µ«ÊÇ£¬ÔÚºÜ¶àÇé¿öÏÂ£¬ÄÚºËĞèÒªÖ÷¶¯µØÆô¶¯Ä³¸öÄ£¿éµÄ°²×°¡£ÀıÈç£¬µ±ÄÚºË´ÓÍøÂçÖĞ½ÓÊÕµ½Ò»¸öÌØÊâµÄ<span
lang=EN-US>packet</span>»ò±¨ÎÄÊ±£¬¶øÖ§³ÖÏàÓ¦¹æ³ÌµÄÄ£¿éÉĞÎ´°²×°£»ÓÖÈç£¬µ±ÄÚºË¼ì²âµ½Ä³ÖÖÓ²¼şÊ±£¬¶øÖ§³ÖÕâÖÖÓ²¼şµÄÄ£¿éÉĞÎ´°²×°µÈµÈ£¬ÀàËÆÇé¿ö»¹ÓĞºÜ¡£ÔÚÕâÖÖÇé¿öÏÂ£¬ÄÚºË¾Íµ÷ÓÃ<span
lang=EN-US>request_module()</span>Ö÷¶¯µØÆô¶¯Ä£¿éµÄ°²×°¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>request_module()</span><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>º¯ÊıÔÚ<span
lang=EN-US>kernel/kmod.c</span>ÖĞ£º<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>/**<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span>*
request_module - try to load a kernel module<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp; </span>*
@module_name: Name of module<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>*<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
Load a module using the user mode module loader. The function returns<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
<span class=GramE>zero</span> on success or a negative errno code on failure.
Note that a<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
<span class=GramE>successful</span> module load does not mean the module did
not then unload<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
<span class=GramE>and</span> exit on an error of its own. Callers must check
that the service<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
<span class=GramE>they</span> requested is now available not blindly invoke it.<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
If module auto-loading support is disabled then this function<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*
becomes a no-operation.<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span style='mso-tab-count:1'>&nbsp; </span>*/<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span class=GramE><span
lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";
color:black;mso-font-kerning:0pt'>int</span></span><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'> request_module(const char * module_name)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>{<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span><span class=GramE>pid_t</span> pid;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>int</span> waitpid_result;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>sigset_t</span> tmpsig;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>int</span> i;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>static</span> atomic_t kmod_concurrent = ATOMIC_INIT(0);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span>#define
MAX_KMOD_CONCURRENT <span class=GramE>50<span style='mso-spacerun:yes'>&nbsp;
</span>/</span>* Completely arbitrary value - KAO */<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>static</span> int kmod_loop_msg;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* Don't allow request_<span class=GramE>module(</span>) before the root
fs is mounted! <span style='mso-spacerun:yes'>&nbsp;</span>*/<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> ( ! current-&gt;fs-&gt;root ) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='margin-left:36.0pt;text-align:left;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>printk(</span>KERN_ERR &quot;request_module[%s]: Root
fs not mounted\n&quot;, module_name);<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='margin-left:36.0pt;text-align:left;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> -EPERM;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/* If modprobe
needs a service that is in a module, we get a recursive<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* loop.<span
style='mso-spacerun:yes'>&nbsp; </span>Limit the number of running kmod threads
to max_threads/2 or<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*
MAX_KMOD_CONCURRENT, whichever is the smaller.<span
style='mso-spacerun:yes'>&nbsp; </span>A cleaner method<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*
would be to run the parents of this process, counting how many times<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:36.0pt;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>* <span
class=GramE>kmod</span> was invoked.<span style='mso-spacerun:yes'>&nbsp;
</span>That would mean accessing the internals of the<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*
<span class=GramE>process</span> tables to get the command line,
proc_pid_cmdline is static<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*
<span class=GramE>and</span> it is not worth changing the proc code just to
handle this case. <o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*
KAO.<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>*/<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>i
= max_threads/2;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=GramE>if</span> (i &gt; MAX_KMOD_CONCURRENT)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>i = MAX_KMOD_CONCURRENT;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>atomic_<span class=GramE>inc(</span>&amp;kmod_concurrent);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (atomic_read(&amp;kmod_concurrent) &gt; i) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (kmod_loop_msg++ &lt; 5)<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=GramE>printk(</span>KERN_ERR<o:p></o:p></span></p>

<p class=MsoNormal align=left style='margin-left:36.0pt;text-align:left;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&quot;<span class=GramE>kmod</span>: runaway modprobe loop assumed and
stopped\n&quot;);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>atomic_<span class=GramE>dec(</span>&amp;kmod_concurrent);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> -ENOMEM;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>pid</span> = kernel_thread(exec_modprobe, (void*)
module_name, 0);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (pid &lt; 0) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>printk(</span>KERN_ERR &quot;request_module[%s]: fork
failed, errno %d\n&quot;, module_name, -pid);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>atomic_<span class=GramE>dec(</span>&amp;kmod_concurrent);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> pid;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* Block everything but SIGKILL/SIGSTOP */<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_lock_<span class=GramE>irq(</span>&amp;current-&gt;sigmask_lock);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>tmpsig</span> = current-&gt;blocked;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>siginitsetinv(</span>&amp;current-&gt;blocked,
sigmask(SIGKILL) | sigmask(SIGSTOP));<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>recalc_<span class=GramE>sigpending(</span>current);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_unlock_<span class=GramE>irq(</span>&amp;current-&gt;sigmask_lock);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>waitpid_result = <span class=GramE>waitpid(</span>pid, NULL, __WCLONE);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>atomic_<span class=GramE>dec(</span>&amp;kmod_concurrent);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* Allow signals again<span class=GramE>..</span> */<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_lock_<span class=GramE>irq(</span>&amp;current-&gt;sigmask_lock);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>current</span>-&gt;blocked = tmpsig;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>recalc_<span class=GramE>sigpending(</span>current);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_unlock_<span class=GramE>irq(</span>&amp;current-&gt;sigmask_lock);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>if</span> (waitpid_result != pid) {<o:p></o:p></span></p>

<p class=MsoNormal align=left style='margin-left:36.0pt;text-align:left;
mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp; </span><span
class=GramE>printk(</span>KERN_ERR &quot;request_module[%s]: waitpid(%d,...)
failed, errno %d\n&quot;,<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>module_name, <span class=GramE>pid</span>, -waitpid_result);<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>return</span> 0;<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span>}<o:p></o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:ËÎÌå;mso-hansi-font-family:
"Times New Roman";color:black;mso-font-kerning:0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>¶Ô¸Ãº¯ÊıµÄ½âÊÍÈçÏÂ£º<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:32.05pt;text-align:left;
text-indent:-21.25pt;mso-list:l3 level1 lfo5;tab-stops:list 32.05pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>ÒòÎª<span lang=EN-US>request_module</span>£¨£©ÊÇÔÚµ±Ç°½ø³ÌµÄÉÏÏÂÎÄÖĞÖ´ĞĞµÄ£¬Òò´ËÊ×ÏÈ¼ì²éµ±Ç°½ø³ÌËùÔÚµÄ¸ùÎÄ¼şÏµÍ³ÊÇ·ñÒÑ¾­°²×°¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:32.05pt;text-align:left;
text-indent:-21.25pt;mso-list:l3 level1 lfo5;tab-stops:list 32.05pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>¶Ô<span lang=EN-US>request_module</span>£¨£©µÄµ÷ÓÃÓĞ¿ÉÄÜÇ¶Ì×£¬ÒòÎªÔÚ°²×°¹ı³ÌÖĞ¿ÉÄÜ»á·¢ÏÖ±ØĞëÏÈ°²×°ÁíÒ»¸öÄ£¿é¡£ÀıÈç£¬<span
lang=EN-US>MS-DOS</span>Ä£¿éĞèÒªÁíÒ»¸öÃûÎª<span lang=EN-US>fat</span>µÄÄ£¿é£¬<span
lang=EN-US>fat</span>Ä£¿é°üº¬»ùÓÚÎÄ¼ş·ÖÅä±í£¨<span lang=EN-US>FAT</span>£©µÄËùÓĞÎÄ¼şÏµÍ³ËùÍ¨ÓÃµÄÒ»Ğ©´úÂë¡£Òò´Ë£¬Èç¹û<span
lang=EN-US>fat</span>Ä£¿é»¹²»ÔÚÏµÍ³ÖĞ£¬ÄÇÃ´ÔÚÏµÍ³°²×°<span lang=EN-US>MS-DOS</span>Ä£¿éÊ±£¬<span
lang=EN-US>fat</span>Ä£¿éÒ²±ØĞë±»¶¯Ì¬Á´½Óµ½ÕıÔÚÔËĞĞµÄÄÚºËÖĞ¡£Òò´Ë£¬¾ÍÒª¶ÔÇ¶Ì×Éî¶È¼ÓÒÔÏŞÖÆ£¬³ÌĞòÖĞÉèÖÃÁËÒ»¸ö¾²Ì¬±äÁ¿<span
lang=EN-US>kmod_concurrent</span>£¬×÷ÎªÇ¶Ì×Éî¶ÈµÄ¼ÆÊıÆ÷£¬²¢ÇÒ»¹¹æ¶¨ÁËÇ¶Ì×Éî¶ÈµÄÉÏÏŞÎª<span lang=EN-US>MAX_KMOD_CONCURRENT</span>¡£²»¹ı£¬¶ÔÇ¶Ì×Éî¶ÈµÄ¿ØÖÆ»¹Òª¿¼ÂÇµ½ÏµÍ³ÖĞ<span
class=GramE>¶Ô½ø³Ì</span>ÊıÁ¿µÄÏŞÖÆ£¬¼´<span lang=EN-US>max_therads</span>£¬ÒòÎªÔÚ°²×°µÄ¹ı³ÌÖĞÒª´´½¨ÁÙÊ±µÄ½ø³Ì¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:32.05pt;text-align:left;
text-indent:-21.25pt;mso-list:l3 level1 lfo5;tab-stops:list 32.05pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>Í¨¹ıÁËÕâĞ©¼ì²éÒÔºó£¬¾Íµ÷ÓÃ<span lang=EN-US>kernel_thread()</span>´´½¨Ò»¸öÄÚºËÏß³Ì<span
lang=EN-US>exec_modprobe</span>£¨£©¡£<span lang=EN-US>exec_modprobe</span>£¨£©½ÓÊÜÒª°²×°µÄÄ£¿éÃû×÷Îª²ÎÊı£¬µ÷ÓÃ<span
lang=EN-US>execve()</span>ÏµÍ³µ÷ÓÃÖ´ĞĞÍâ²¿³ÌĞò<span lang=EN-US>/sbin/modprobe</span>£¬È»ºó£¬<span
lang=EN-US> modprobe</span>³ÌĞòÕæÕıµØ°²×°Òª°²×°µÄÄ£¿éÒÔ¼°ËùÒÀÀµµÄÈÎºÎÄ£¿é¡£<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='margin-left:32.05pt;text-align:left;
text-indent:-21.25pt;mso-list:l3 level1 lfo5;tab-stops:list 32.05pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'><span style='mso-list:Ignore'>¡¤<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:ËÎÌå;mso-hansi-font-family:"Times New Roman";color:black;
mso-font-kerning:0pt'>´´½¨ÄÚºËÏß³Ì³É¹¦ÒÔºó£¬ÏÈ°Ñµ±Ç°½ø³ÌĞÅºÅÖĞ³ı<span lang=EN-US>SIGKILL</span>ºÍ<span
lang=EN-US>SIGSTOP</span>ÒÔÍâµÄËùÓĞĞÅºÅ¶¼ÆÁ±Îµô£¬ÃâµÃµ±Ç°½ø³ÌÔÚµÈ´ıÄ£¿é°²×°µÄ¹ı³ÌÖĞÊÜµ½¸ÉÈÅ£¬È»ºó¾ÍÍ¨¹ı<span
lang=EN-US>waitpid</span>£¨£©Ê¹µ±Ç°½ø³ÌË¯ÃßµÈ´ı£¬Ö±µ½<span lang=EN-US>exec_modprobe</span>£¨£©ÄÚºËÏß³ÌÍê³ÉÄ£¿é°²×°ºóÍË³ö¡£µ±Ç°½ø³Ì±»»½ĞÑ¶ø´Ó<span
lang=EN-US>waitpid</span>£¨£©·µ»ØÊ±£¬ÓÖÒª»Ö¸´µ±Ç°½ø³ÌÔ­ÓĞĞÅºÅµÄÉèÖÃ¡£¸ù¾İ<span lang=EN-US>waitpid</span>£¨£©µÄ·µ»ØÖµ¿ÉÒÔÅĞ¶Ï<span
lang=EN-US>exec_modprobe</span>£¨£©²Ù×÷µÄ³É¹¦Óë·ñ¡£Èç¹ûÊ§°Ü£¬¾ÍÍ¨¹ı<span lang=EN-US>prink()</span>ÔÚÏµÍ³µÄÔËĞĞÈÕÖ¾¡°£¯<span
lang=EN-US>var/log/message</span></span><span lang=EN-US style='mso-ascii-font-family:
ËÎÌå;color:black;mso-font-kerning:0pt'>¡±</span><span style='font-family:ËÎÌå;
mso-hansi-font-family:"Times New Roman";color:black;mso-font-kerning:0pt'>ÖĞ¼ÇÂ¼Ò»Ìõ³ö´íĞÅÏ¢¡£<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>


<!-- Mirrored from www.kerneltravel.net/kernel-book/ç¬¬åç« %20æ¨¡å—æœºåˆ¶/10.2.2.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:01:27 GMT -->
</html>
