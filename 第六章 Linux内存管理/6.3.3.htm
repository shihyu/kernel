<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">


<!-- Mirrored from www.kerneltravel.net/kernel-book/ç¬¬å…­ç« %20Linuxå†…å­˜ç®¡ç†/6.3.3.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:00:39 GMT -->
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="6.3.3.files/filelist.xml">
<link rel=Edit-Time-Data href="6.3.3.files/editdata.html">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title> Slab·ÖÅä»úÖÆ</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chsdate" downloadurl=""/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chmetcnv" downloadurl=""/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>CLJ</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>CLJ</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2007-08-15T07:54:00Z</o:Created>
  <o:LastSaved>2007-08-15T07:54:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2125</o:Words>
  <o:Characters>12119</o:Characters>
  <o:Lines>100</o:Lines>
  <o:Paragraphs>28</o:Paragraphs>
  <o:CharactersWithSpaces>14216</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 °õ</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:ËÎÌå;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:"\@ËÎÌå";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:ËÎÌå;
	mso-font-kerning:1.0pt;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:381632600;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l1
	{mso-list-id:857282224;
	mso-list-type:simple;
	mso-list-template-ids:812002690;}
@list l1:level1
	{mso-level-text:£¨%1£©;
	mso-level-tab-stop:40.2pt;
	mso-level-number-position:left;
	margin-left:40.2pt;
	text-indent:-28.8pt;}
@list l2
	{mso-list-id:1040478640;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l3
	{mso-list-id:1097017133;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l4
	{mso-list-id:1618365185;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
@list l5
	{mso-list-id:1963537333;
	mso-list-type:simple;
	mso-list-template-ids:1937021516;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:¡¤;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;
	font-family:ËÎÌå;
	mso-hansi-font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:ÆÕÍ¨±í¸ñ;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:21.0pt;text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal style='mso-outline-level:1'><st1:chsdate Year="1899"
Month="12" Day="30" IsLunarDate="False" IsROCDate="False" w:st="on"><span
 lang=EN-US>6.3.3</span></st1:chsdate><span lang=EN-US> Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅä»úÖÆ</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span class=GramE><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>²ÉÓÃ»ï°é</span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ëã·¨·ÖÅäÄÚ´æÊ±£¬Ã¿´ÎÖÁÉÙ·ÖÅäÒ»¸öÒ³Ãæ¡£µ«µ±ÇëÇó·ÖÅäµÄÄÚ´æ´óĞ¡Îª¼¸Ê®¸ö×Ö½Ú»ò¼¸°Ù¸ö×Ö½ÚÊ±Ó¦¸ÃÈçºÎ´¦Àí£¿ÈçºÎÔÚÒ»¸öÒ³ÃæÖĞ·ÖÅäĞ¡µÄÄÚ´æÇø£¬Ğ¡ÄÚ´æÇøµÄ·ÖÅäËù²úÉúµÄÄÚËéÆ¬ÓÖÈçºÎ½â¾ö£¿</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>Linux2.0</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>²ÉÓÃµÄ½â¾ö°ì·¨ÊÇ½¨Á¢ÁË</span><span lang=EN-US>13</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¸ö¿ÕÏĞÇøÁ´±í£¬ËüÃÇµÄ´óĞ¡´Ó</span><span lang=EN-US>32</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>×Ö½Úµ½</span><span lang=EN-US>132056</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>×Ö½Ú¡£´Ó</span><span lang=EN-US>Linux2.2</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¿ªÊ¼£¬</span><span lang=EN-US>MM</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄ¿ª·¢Õß²ÉÓÃÁËÒ»ÖÖ½Ğ×ö</span><span
lang=EN-US>slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄ·ÖÅäÄ£Ê½£¬¸ÃÄ£Ê½ÔçÔÚ</span><span lang=EN-US>1994</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Äê¾Í±»¿ª·¢³öÀ´£¬ÓÃÓÚ</span><span lang=EN-US>Sun Microsystem Solaris
2.4</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>²Ù×÷ÏµÍ³ÖĞ¡£</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄÌá³öÖ÷ÒªÊÇ»ùÓÚÒÔÏÂ¿¼ÂÇ£º</span></p>

<p class=MsoNormal style='margin-left:32.65pt;text-indent:-21.25pt;mso-list:
l3 level1 lfo1;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÄÚºË¶ÔÄÚ´æÇøµÄ·ÖÅäÈ¡¾öÓÚËù´æ·ÅÊı¾İµÄÀàĞÍ¡£ÀıÈç£¬µ±¸øÓÃ»§<span
class=GramE>Ì¬½ø³Ì</span>·ÖÅäÒ³ÃæÊ±£¬ÄÚºËµ÷ÓÃ</span><span lang=EN-US>get_free_page()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>º¯Êı£¬²¢ÓÃ</span><span lang=EN-US>0</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ìî³äÕâ¸öÒ³Ãæ¡£</span>
<span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¶ø¸øÄÚºËµÄÊı¾İ½á¹¹·ÖÅäÒ³ÃæÊ±£¬ÊÂÇéÃ»ÓĞÕâÃ´¼òµ¥£¬ÀıÈç£¬Òª¶ÔÊı¾İ½á¹¹ËùÔÚµÄÄÚ´æ½øĞĞ³õÊ¼»¯¡¢ÔÚ²»ÓÃÊ±ÒªÊÕ»ØËüÃÇËùÕ¼ÓÃµÄÄÚ´æ¡£Òò´Ë£¬</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞÒıÈëÁË¶ÔÏóÕâ¸ö¸ÅÄî£¬ËùÎ½¶ÔÏó¾ÍÊÇ´æ·ÅÒ»×éÊı¾İ½á¹¹µÄÄÚ´æÇø£¬Æä·½·¨¾ÍÊÇ¹¹Ôì<span
class=GramE>»òÎö¹¹</span>º¯Êı£¬¹¹Ôìº¯ÊıÓÃÓÚ³õÊ¼»¯Êı¾İ½á¹¹ËùÔÚµÄÄÚ´æÇø£¬<span class=GramE>¶øÎö¹¹º¯Êı</span>ÊÕ»ØÏàÓ¦µÄÄÚ´æÇø¡£µ«ÎªÁË±ãÓÚÀí½â£¬ÄãÒ²¿ÉÒÔ°Ñ¶ÔÏóÖ±½Ó¿´×÷ÄÚºËµÄÊı¾İ½á¹¹¡£ÎªÁË±ÜÃâÖØ¸´³õÊ¼»¯¶ÔÏó£¬</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·ÖÅäÄ£Ê½²¢²»¶ªÆúÒÑ·ÖÅäµÄ¶ÔÏó£¬¶øÊÇÊÍ·Åµ«°ÑËüÃÇÒÀÈ»±£ÁôÔÚÄÚ´æÖĞ¡£µ±ÒÔºóÓÖÒªÇëÇó·ÖÅäÍ¬Ò»¶ÔÏóÊ±£¬¾Í¿ÉÒÔ´ÓÄÚ´æ»ñÈ¡¶ø²»ÓÃ½øĞĞ³õÊ¼»¯£¬ÕâÊÇÔÚ</span><span
lang=EN-US>Solaris </span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞÒıÈë</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄ»ù±¾Ë¼Ïë¡£</span></p>

<p class=MsoNormal style='margin-left:32.65pt;text-indent:24.0pt'><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Êµ¼ÊÉÏ£¬</span><span lang=EN-US>Linux</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ¶Ô</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>·ÖÅäÄ£Ê½ÓĞËù¸Ä½ø£¬Ëü¶ÔÄÚ´æÇøµÄ´¦Àí²¢²»ĞèÒª½øĞĞ³õÊ¼»¯»ò»ØÊÕ¡£³öÓÚĞ§ÂÊµÄ¿¼ÂÇ£¬</span><span
lang=EN-US>Linux</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>²¢²»µ÷ÓÃ¶ÔÏóµÄ¹¹Ôì<span class=GramE>»òÎö¹¹</span>º¯Êı£¬¶øÊÇ°ÑÖ¸ÏòÕâÁ½¸öº¯ÊıµÄÖ¸Õë¶¼ÖÃÎª¿Õ¡£</span><span
lang=EN-US>Linux</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞÒıÈë</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄÖ÷ÒªÄ¿µÄÊÇÎªÁË¼õÉÙ¶Ô»ï°éËã·¨µÄµ÷ÓÃ´ÎÊı¡£</span></p>

<p class=MsoNormal style='margin-left:38.65pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo2;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Êµ¼ÊÉÏ£¬ÄÚºË¾­³£·´¸´Ê¹ÓÃÄ³Ò»ÄÚ´æÇø¡£ÀıÈç£¬Ö»ÒªÄÚºË´´½¨Ò»¸öĞÂµÄ½ø³Ì£¬¾ÍÒªÎª¸Ã½ø³ÌÏà¹ØµÄÊı¾İ½á¹¹£¨</span><span
lang=EN-US>task_struct</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¡¢´ò¿ªÎÄ¼ş¶ÔÏóµÈ£©·ÖÅäÄÚ´æÇø¡£µ±½ø³Ì½áÊøÊ±£¬ÊÕ»ØÕâĞ©ÄÚ´æÇø¡£ÒòÎª½ø³ÌµÄ´´½¨ºÍ³·Ïú·Ç³£Æµ·±£¬Òò´Ë£¬</span><span
lang=EN-US>Linux</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄÔçÆÚ°æ±¾°Ñ´óÁ¿µÄÊ±¼ä»¨·ÑÔÚ·´¸´·ÖÅä»ò»ØÊÕÕâĞ©ÄÚ´æÇøÉÏ¡£´Ó</span><span
lang=EN-US>Linux2.2</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¿ªÊ¼£¬°ÑÄÇĞ©Æµ·±Ê¹ÓÃµÄÒ³Ãæ±£´æÔÚ¸ßËÙ»º´æÖĞ²¢ÖØĞÂÊ¹ÓÃ¡£</span></p>

<p class=MsoNormal style='margin-left:38.65pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo2;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¿ÉÒÔ¸ù¾İ¶ÔÄÚ´æÇøµÄÊ¹ÓÃÆµÂÊÀ´¶ÔËü·ÖÀà¡£¶ÔÓÚÔ¤ÆÚÆµ·±Ê¹ÓÃµÄÄÚ´æÇø£¬¿ÉÒÔ´´½¨Ò»×éÌØ¶¨´óĞ¡µÄ×¨ÓÃ»º³åÇø½øĞĞ´¦Àí£¬ÒÔ±ÜÃâÄÚËéÆ¬µÄ²úÉú¡£¶ÔÓÚ½ÏÉÙÊ¹ÓÃµÄÄÚ´æÇø£¬¿ÉÒÔ´´½¨Ò»×éÍ¨ÓÃ»º³åÇø£¨Èç</span><span
lang=EN-US>Linux2.0</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞËùÊ¹ÓÃµÄ</span><span
lang=EN-US>2</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄ<span class=GramE>Ãİ</span>´Î·½£©À´´¦Àí£¬¼´Ê¹ÕâÖÖ´¦ÀíÄ£Ê½²úÉúËéÆ¬£¬Ò²¶ÔÕû¸öÏµÍ³µÄĞÔÄÜÓ°Ïì²»´ó¡£</span></p>

<p class=MsoNormal style='margin-left:38.65pt;text-indent:-21.25pt;mso-list:
l0 level1 lfo2;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ó²¼ş¸ßËÙ»º´æµÄÊ¹ÓÃ£¬ÓÖÎª¾¡Á¿¼õÉÙ¶Ô»ï°éËã·¨µÄµ÷ÓÃÌá¹©ÁËÁíÒ»¸öÀíÓÉ£¬ÒòÎª¶Ô»ï°éËã·¨µÄÃ¿´Îµ÷ÓÃ¶¼»á¡°ÅªÔà¡±Ó²¼ş¸ßËÙ»º´æ£¬Òò´Ë£¬Õâ¾ÍÔö¼ÓÁË¶ÔÄÚ´æµÄÆ½¾ù·ÃÎÊ´ÎÊı¡£</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅäÄ£Ê½°Ñ¶ÔÏó·Ö×é·Å½ø»º³åÇø£¨¾¡¹ÜÓ¢ÎÄÖĞÊ¹ÓÃÁË</span><span lang=EN-US>Cache</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Õâ¸ö´Ê£¬µ«Êµ¼ÊÉÏÖ¸µÄÊÇÄÚ´æÖĞµÄÇøÓò£¬¶ø²»ÊÇÖ¸Ó²¼ş¸ßËÙ»º´æ£©¡£ÒòÎª»º³åÇøµÄ×éÖ¯ºÍ¹ÜÀíÓëÓ²¼ş¸ßËÙ»º´æµÄÃüÖĞÂÊÃÜÇĞÏà¹Ø£¬Òò´Ë£¬</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>»º³åÇø²¢·ÇÓÉ¸÷¸ö¶ÔÏóÖ±½Ó¹¹³É£¬¶øÊÇÓÉÒ»Á¬´®µÄ¡°´ó¿é£¨</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£©¡±¹¹³É£¬¶øÃ¿¸ö´ó¿éÖĞÔò°üº¬ÁËÈô¸É¸öÍ¬ÖÖÀàĞÍµÄ¶ÔÏó£¬ÕâĞ©¶ÔÏó»òÒÑ±»·ÖÅä£¬»ò¿ÕÏĞ£¬ÈçÍ¼</span><span
lang=EN-US>6.12</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ËùÊ¾¡£Ò»°ã¶øÑÔ£¬¶ÔÏó·ÖÁ½ÖÖ£¬Ò»ÖÖÊÇ´ó¶ÔÏó£¬Ò»ÖÖÊÇĞ¡¶ÔÏó¡£ËùÎ½Ğ¡¶ÔÏó£¬ÊÇÖ¸ÔÚÒ»¸öÒ³ÃæÖĞ¿ÉÒÔÈİÄÉÏÂºÃ¼¸¸ö¶ÔÏóµÄÄÇÖÖ¡£ÀıÈç£¬Ò»¸ö</span><span
lang=EN-US>inode</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>½á¹¹´óÔ¼Õ¼</span><span lang=EN-US>300</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¶à¸ö×Ö½Ú£¬Òò´Ë£¬Ò»¸öÒ³ÃæÖĞ¿ÉÒÔÈİÄÉ</span><span lang=EN-US>8</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¸öÒÔÉÏµÄ</span><span lang=EN-US>inode</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹£¬Òò´Ë£¬</span><span lang=EN-US>inode</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹¾ÍÎªĞ¡¶ÔÏó¡£</span><span lang=EN-US>Linux</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÄÚºËÖĞ°ÑĞ¡ÓÚ</span><span lang=EN-US>512</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>×Ö½ÚµÄ¶ÔÏó½Ğ×öĞ¡¶ÔÏó¡£</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:83.45pt;text-indent:22.8pt'><!--[if gte vml 1]><o:wrapblock><v:group
  id="_x0000_s1026" style='position:absolute;left:0;text-align:left;
  margin-left:68.7pt;margin-top:0;width:343.5pt;height:149.4pt;z-index:1'
  coordorigin="2058,8578" coordsize="6870,2988" o:allowincell="f">
  <v:group id="_x0000_s1027" style='position:absolute;left:2058;top:8578;
   width:6870;height:2988' coordorigin="2058,7416" coordsize="6870,2988">
   <v:group id="_x0000_s1028" style='position:absolute;left:2058;top:8578;
    width:1603;height:830' coordorigin="2058,10902" coordsize="1603,830">
    <v:shapetype id="_x0000_t176" coordsize="21600,21600" o:spt="176" adj="2700"
     path="m@0,qx0@0l0@2qy@0,21600l@1,21600qx21600@2l21600@0qy@1,xe">
     <v:stroke joinstyle="miter"/>
     <v:formulas>
      <v:f eqn="val #0"/>
      <v:f eqn="sum width 0 #0"/>
      <v:f eqn="sum height 0 #0"/>
      <v:f eqn="prod @0 2929 10000"/>
      <v:f eqn="sum width 0 @3"/>
      <v:f eqn="sum height 0 @3"/>
      <v:f eqn="val width"/>
      <v:f eqn="val height"/>
      <v:f eqn="prod width 1 2"/>
      <v:f eqn="prod height 1 2"/>
     </v:formulas>
     <v:path gradientshapeok="t" limo="10800,10800" o:connecttype="custom"
      o:connectlocs="@8,0;0,@9;@8,@7;@6,@9" textboxrect="@3,@3,@4,@5"/>
    </v:shapetype><v:shape id="_x0000_s1029" type="#_x0000_t176" style='position:absolute;
     left:2287;top:10902;width:1374;height:664'/>
    <v:shape id="_x0000_s1030" type="#_x0000_t176" style='position:absolute;
     left:2058;top:11068;width:1374;height:664'>
     <v:textbox style='mso-next-textbox:#_x0000_s1030'>
      <![if !mso]>
      <table cellpadding=0 cellspacing=0 width="100%">
       <tr>
        <td><![endif]>
        <div>
        <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
        "Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇø</span></p>
        </div>
        <![if !mso]></td>
       </tr>
      </table>
      <![endif]></v:textbox>
    </v:shape></v:group><v:group id="_x0000_s1031" style='position:absolute;
    left:4119;top:9408;width:1832;height:996' coordorigin="4348,10570"
    coordsize="1832,996">
    <v:rect id="_x0000_s1032" style='position:absolute;left:4755;top:10570;
     width:1425;height:664'/>
    <v:rect id="_x0000_s1033" style='position:absolute;left:4552;top:10736;
     width:1424;height:664'/>
    <v:rect id="_x0000_s1034" style='position:absolute;left:4348;top:10902;
     width:1425;height:664'>
     <v:textbox style='mso-next-textbox:#_x0000_s1034'>
      <![if !mso]>
      <table cellpadding=0 cellspacing=0 width="100%">
       <tr>
        <td><![endif]>
        <div>
        <p class=MsoNormal><span lang=EN-US><span
        style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span class=GramE>slab</span></span></p>
        </div>
        <![if !mso]></td>
       </tr>
      </table>
      <![endif]></v:textbox>
    </v:rect></v:group><v:group id="_x0000_s1035" style='position:absolute;
    left:8012;top:7582;width:916;height:664' coordorigin="8012,7582"
    coordsize="916,664">
    <v:rect id="_x0000_s1036" style='position:absolute;left:8216;top:7582;
     width:712;height:498'/>
    <v:rect id="_x0000_s1037" style='position:absolute;left:8114;top:7665;
     width:712;height:498'/>
    <v:rect id="_x0000_s1038" style='position:absolute;left:8012;top:7748;
     width:712;height:498'>
     <v:textbox>
      <![if !mso]>
      <table cellpadding=0 cellspacing=0 width="100%">
       <tr>
        <td><![endif]>
        <div>
        <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
        </div>
        <![if !mso]></td>
       </tr>
      </table>
      <![endif]></v:textbox>
    </v:rect></v:group><v:rect id="_x0000_s1039" style='position:absolute;
    left:4984;top:7416;width:1425;height:664'/>
   <v:rect id="_x0000_s1040" style='position:absolute;left:4781;top:7582;
    width:1424;height:664'/>
   <v:rect id="_x0000_s1041" style='position:absolute;left:4577;top:7748;
    width:1425;height:664'>
    <v:textbox>
     <![if !mso]>
     <table cellpadding=0 cellspacing=0 width="100%">
      <tr>
       <td><![endif]>
       <div>
       <p class=MsoNormal><span lang=EN-US><span
       style='mso-spacerun:yes'>&nbsp; </span><span class=GramE>slab</span></span></p>
       </div>
       <![if !mso]></td>
      </tr>
     </table>
     <![endif]></v:textbox>
   </v:rect><v:group id="_x0000_s1042" style='position:absolute;left:6638;
    top:8744;width:916;height:664' coordorigin="8012,7582" coordsize="916,664">
    <v:rect id="_x0000_s1043" style='position:absolute;left:8216;top:7582;
     width:712;height:498'/>
    <v:rect id="_x0000_s1044" style='position:absolute;left:8114;top:7665;
     width:712;height:498'/>
    <v:rect id="_x0000_s1045" style='position:absolute;left:8012;top:7748;
     width:712;height:498'>
     <v:textbox style='mso-next-textbox:#_x0000_s1045'>
      <![if !mso]>
      <table cellpadding=0 cellspacing=0 width="100%">
       <tr>
        <td><![endif]>
        <div>
        <p class=MsoNormal><span lang=EN-US><span
        style='mso-spacerun:yes'>&nbsp;</span></span></p>
        </div>
        <![if !mso]></td>
       </tr>
      </table>
      <![endif]></v:textbox>
    </v:rect></v:group><v:group id="_x0000_s1046" style='position:absolute;
    left:7325;top:9740;width:916;height:664' coordorigin="8012,7582"
    coordsize="916,664">
    <v:rect id="_x0000_s1047" style='position:absolute;left:8216;top:7582;
     width:712;height:498'/>
    <v:rect id="_x0000_s1048" style='position:absolute;left:8114;top:7665;
     width:712;height:498'/>
    <v:rect id="_x0000_s1049" style='position:absolute;left:8012;top:7748;
     width:712;height:498'>
     <v:textbox>
      <![if !mso]>
      <table cellpadding=0 cellspacing=0 width="100%">
       <tr>
        <td><![endif]>
        <div>
        <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
        </div>
        <![if !mso]></td>
       </tr>
      </table>
      <![endif]></v:textbox>
    </v:rect></v:group><v:line id="_x0000_s1050" style='position:absolute'
    from="2974,8080" to="2974,8578"/>
   <v:line id="_x0000_s1051" style='position:absolute' from="2974,8080" to="4577,8080">
    <v:stroke endarrow="block"/>
   </v:line><v:line id="_x0000_s1052" style='position:absolute' from="3432,9076"
    to="3890,9076"/>
   <v:line id="_x0000_s1053" style='position:absolute' from="3890,9076" to="3890,9906"/>
   <v:line id="_x0000_s1054" style='position:absolute' from="3890,9906" to="4119,9906">
    <v:stroke endarrow="block"/>
   </v:line><v:line id="_x0000_s1055" style='position:absolute' from="5954,8080"
    to="8015,8080">
    <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
   </v:line><v:line id="_x0000_s1056" style='position:absolute;flip:y' from="5035,9076"
    to="5035,9574">
    <v:stroke dashstyle="1 1" endcap="round"/>
   </v:line><v:line id="_x0000_s1057" style='position:absolute' from="5035,9076"
    to="6638,9076">
    <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
   </v:line><v:line id="_x0000_s1058" style='position:absolute' from="5493,10072"
    to="7325,10072">
    <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
   </v:line></v:group><v:shapetype id="_x0000_t202" coordsize="21600,21600"
   o:spt="202" path="m,l,21600r21600,l21600,xe">
   <v:stroke joinstyle="miter"/>
   <v:path gradientshapeok="t" o:connecttype="rect"/>
  </v:shapetype><v:shape id="_x0000_s1059" type="#_x0000_t202" style='position:absolute;
   left:8012;top:9574;width:916;height:498' stroked="f">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶ÔÏó</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><w:wrap type="topAndBottom"/>
 </v:group><![endif]--><![if !vml]><span style='mso-ignore:vglayout'>
 <table cellpadding=0 cellspacing=0 align=left>
  <tr>
   <td width=91 height=0></td>
  </tr>
  <tr>
   <td></td>
   <td><img width=463 height=203 src="6.3.3.files/image001.gif" v:shapes="_x0000_s1026 _x0000_s1027 _x0000_s1028 _x0000_s1029 _x0000_s1030 _x0000_s1031 _x0000_s1032 _x0000_s1033 _x0000_s1034 _x0000_s1035 _x0000_s1036 _x0000_s1037 _x0000_s1038 _x0000_s1039 _x0000_s1040 _x0000_s1041 _x0000_s1042 _x0000_s1043 _x0000_s1044 _x0000_s1045 _x0000_s1046 _x0000_s1047 _x0000_s1048 _x0000_s1049 _x0000_s1050 _x0000_s1051 _x0000_s1052 _x0000_s1053 _x0000_s1054 _x0000_s1055 _x0000_s1056 _x0000_s1057 _x0000_s1058 _x0000_s1059"></td>
  </tr>
 </table>
 </span><![endif]><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
</p>

<p class=MsoNormal style='margin-left:83.45pt;text-indent:22.8pt;mso-outline-level:
1'><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Í¼</span><span lang=EN-US>6.10 Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄ×é³É</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Êµ¼ÊÉÏ£¬»º³åÇø¾ÍÊÇÖ÷´æÖĞµÄÒ»Æ¬ÇøÓò£¬°ÑÕâÆ¬ÇøÓò»®·ÖÎª¶à¸ö¿é£¬Ã¿¿é¾ÍÊÇÒ»¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¬Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÓÉÒ»¸ö»ò¶à¸öÒ³Ãæ×é³É£¬Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ´æ·ÅµÄ¾ÍÊÇ¶ÔÏó¡£</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÒòÎª</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·ÖÅäÄ£Ê½µÄÊµÏÖ±È½Ï¸´ÔÓ£¬ÎÒÃÇ²»×¼±¸¶ÔÆä½øĞĞÏêÏ¸µÄ·ÖÎö£¬Ö»¶ÔÖ÷ÒªÄÚÈİ¸øÓèÃèÊö¡£</span></p>

<p class=MsoNormal style='mso-outline-level:1'><span lang=EN-US>1</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£®</span><span lang=EN-US> Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄÊı¾İ½á¹¹</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅäÄ£Ê½ÓĞÁ½¸öÖ÷ÒªµÄÊı¾İ½á¹¹£¬Ò»¸öÊÇÃèÊö»º³åÇøµÄ½á¹¹</span><span lang=EN-US>kmem_cache_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬Ò»¸öÊÇÃèÊö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄ½á¹¹</span><span lang=EN-US>kmem_slab_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬ÏÂÃæ¶ÔÕâÁ½¸ö½á¹¹¸øÓè¼òÒªÌÖÂÛ£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¨</span><span
lang=EN-US>1</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£©</span><span lang=EN-US>Slab</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÊÇ</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¹ÜÀíÄ£Ê½ÖĞ×î»ù±¾µÄ½á¹¹¡£ËüÓÉÒ»×éÁ¬ĞøµÄÎïÀíÒ³Ãæ×é³É£¬¶ÔÏó¾Í±»Ë³Ğò·ÅÔÚÕâĞ©Ò³ÃæÖĞ¡£ÆäÊı¾İ½á¹¹ÔÚ</span><span
lang=EN-US>mm/slab.c</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞ¶¨ÒåÈçÏÂ£º</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>/*</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>* slab_t</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>*</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>* Manages the objs in a slab. Placed
either at the beginning of mem allocated</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>* <span class=GramE>for</span> a slab,
or allocated from an general cache.</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>* Slabs are chained into three <span
class=GramE>list</span>: fully used, partial, fully free slabs.</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>*/</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span class=GramE>typedef</span>
struct slab_s {</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>struct</span> list_head<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>list;</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> long<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>colouroff;</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>void</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>*s_mem;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* including colour offset */</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>inuse;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* num of objs active in slab */</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>kmem_bufctl_t</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>free;</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>} slab_t;</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><!--[if gte vml 1]><o:wrapblock><v:group
  id="_x0000_s1060" style='position:absolute;left:0;text-align:left;
  margin-left:57.75pt;margin-top:0;width:263.35pt;height:182.75pt;z-index:2'
  coordorigin="2942,8042" coordsize="5267,3655" o:allowincell="f">
  <v:rect id="_x0000_s1061" style='position:absolute;left:4545;top:8042;
   width:2061;height:3486'>
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>×ÅÉ«²¹³¥Çø</span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶ÔÏóÇø</span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>¿ÕÏĞ¶ÔÏóÁ´</span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>×ÅÉ«Çø</span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      <p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:rect><v:line id="_x0000_s1062" style='position:absolute' from="4545,8540"
   to="6606,8540"/>
  <v:line id="_x0000_s1063" style='position:absolute' from="4545,10532" to="6606,10532"/>
  <v:line id="_x0000_s1064" style='position:absolute' from="4545,11196" to="6606,11196"/>
  <v:line id="_x0000_s1065" style='position:absolute' from="6148,11362" to="7293,11362">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1066" style='position:absolute;flip:x' from="3858,11362"
   to="4774,11362">
   <v:stroke endarrow="block"/>
  </v:line><v:shape id="_x0000_s1067" type="#_x0000_t202" style='position:absolute;
   left:7293;top:11196;width:916;height:501' stroked="f">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span class=GramE><span lang=EN-US>next</span></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><v:shape id="_x0000_s1068" type="#_x0000_t202" style='position:absolute;
   left:2942;top:11196;width:916;height:501' stroked="f">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span class=GramE><span lang=EN-US>prev</span></span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:shape><w:wrap type="topAndBottom"/>
 </v:group><![endif]--><![if !vml]><span style='mso-ignore:vglayout'>
 <table cellpadding=0 cellspacing=0>
  <tr>
   <td width=77 height=0></td>
  </tr>
  <tr>
   <td></td>
   <td><img width=355 height=249 src="6.3.3.files/image002.gif" v:shapes="_x0000_s1060 _x0000_s1061 _x0000_s1062 _x0000_s1063 _x0000_s1064 _x0000_s1065 _x0000_s1066 _x0000_s1067 _x0000_s1068"></td>
  </tr>
 </table>
 </span><![endif]><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
<span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÕâÀïµÄÁ´±íÓÃÀ´½«Ç°Ò»¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ºÍºóÒ»¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Á´½ÓÆğÀ´ĞÎ³ÉÒ»¸öË«ÏòÁ´±í£¬</span><span lang=EN-US>colouroff</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Îª¸Ã</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÉÏ×ÅÉ«ÇøµÄ´óĞ¡£¬Ö¸Õë</span><span
lang=EN-US>s_mem</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Ö¸Ïò¶ÔÏóÇøµÄÆğµã£¬</span><span lang=EN-US>inuse</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÊÇ</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞËù·ÖÅä¶ÔÏóµÄ¸öÊı¡£×îºó£¬</span><span
lang=EN-US>free</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄÖµÖ¸Ã÷ÁË¿ÕÏĞ¶ÔÏóÁ´ÖĞµÄµÚÒ»¸ö¶ÔÏó£¬</span><span
lang=EN-US>kmem_bufctl_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÆäÊµÊÇÒ»¸öÕûÊı¡£</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>½á¹¹µÄÊ¾ÒâÍ¼ÈçÍ¼</span><span lang=EN-US>6.11</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ËùÊ¾£º</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Í¼</span><span lang=EN-US>6.11 Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹Ê¾ÒâÍ¼</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶ÔÓÚĞ¡¶ÔÏó£¬</span>
<span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¾Í°Ñ</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄÃèÊö½á¹¹</span><span
lang=EN-US>slab_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·ÅÔÚ¸Ã</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ£»¶ÔÓÚ´ó¶ÔÏó£¬Ôò°Ñ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹ÓÎÀë³öÀ´£¬¼¯ÖĞ´æ·Å¡£¹ØÓÚ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ<span class=GramE>µÄ×Å</span>É«ÇøÔÙ¸øÓè¾ßÌåÃèÊö£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l5 level1 lfo3;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ã¿¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄÊ×²¿¶¼ÓĞÒ»¸öĞ¡Ğ¡µÄÇøÓòÊÇ²»ÓÃµÄ£¬³ÆÎª<span class=GramE>¡°×Å</span>É«Çø£¨</span><span
lang=EN-US>coloring area</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£©</span><span
lang=EN-US>¡±</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¡£×ÅÉ«ÇøµÄ´óĞ¡Ê¹</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÄÃ¿¸ö¶ÔÏóµÄÆğÊ¼µØÖ·¶¼°´¸ßËÙ»º´æÖĞµÄ<span class=GramE>¡±</span>»º´æĞĞ£¨</span><span
lang=EN-US>cache line</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£©</span><span
class=GramE><span lang=EN-US>¡±</span></span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>´óĞ¡½øĞĞ¶ÔÆë£¨</span><span
lang=EN-US>80386</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄÒ»¼¶¸ßËÙ»º´æ<span class=GramE>ĞĞ´óĞ¡</span>Îª</span><span
lang=EN-US>16</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>×Ö½Ú£¬</span><span lang=EN-US>Pentium</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Îª</span><span lang=EN-US>32</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>×Ö½Ú£©¡£ÒòÎª</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÊÇÓÉ</span><span lang=EN-US>1</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¸öÒ³Ãæ»ò¶à¸öÒ³Ãæ£¨×î¶àÎª</span><span lang=EN-US>32</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£©×é³É£¬Òò´Ë£¬Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¶¼ÊÇ´ÓÒ»¸öÒ³Ãæ±ß½ç¿ªÊ¼µÄ£¬Ëü×ÔÈ»°´¸ßËÙ»º´æµÄ»º³åĞĞ¶ÔÆë¡£µ«ÊÇ£¬</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÄ¶ÔÏó´óĞ¡²»È·¶¨£¬ÉèÖÃ×ÅÉ«ÇøµÄÄ¿µÄ¾ÍÊÇ½«</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÚÒ»¸ö¶ÔÏóµÄÆğÊ¼µØÖ·ÍùºóÍÆµ½Óë»º³åĞĞ¶ÔÆëµÄÎ»ÖÃ¡£ÒòÎªÒ»¸ö»º³åÇøÖĞÓĞ¶à¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬Òò´Ë£¬Ó¦¸Ã°ÑÃ¿¸ö»º³åÇøÖĞµÄ¸÷¸ö</span><span class=GramE><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>×Å</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>É«ÇøµÄ´óĞ¡¾¡Á¿°²ÅÅ³É²»Í¬µÄ´óĞ¡£¬ÕâÑù¿ÉÒÔÊ¹µÃÔÚ²»Í¬µÄ</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞ£¬´¦ÓÚÍ¬Ò»Ïà¶ÔÎ»ÖÃµÄ¶ÔÏó£¬ÈÃËüÃÇÔÚ¸ßËÙ»º´æÖĞµÄÆğÊ¼µØÖ·Ïà»¥´í¿ª£¬ÕâÑù¾Í¿ÉÒÔ¸ÄÉÆ¸ßËÙ»º´æµÄ´æÈ¡Ğ§ÂÊ¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l5 level1 lfo3;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ã¿¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÉÏ×îºóÒ»¸ö¶ÔÏóÒÔºóÒ²ÓĞ¸öĞ¡Ğ¡µÄ·ÏÁÏÇøÊÇ²»ÓÃµÄ£¬ÕâÊÇ¶Ô×ÅÉ«Çø´óĞ¡µÄ²¹³¥£¬Æä´óĞ¡<span
class=GramE>È¡¾öÓÚ×Å</span>É«ÇøµÄ´óĞ¡£¬ÒÔ¼°</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÓëÆäÃ¿¸ö¶ÔÏóµÄÏà¶Ô´óĞ¡¡£µ«¸ÃÇøÓò<span class=GramE>Óë×Å</span>É«ÇøµÄ×ÜºÍ¶ÔÓÚÍ¬Ò»ÖÖ¶ÔÏóµÄ¸÷¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÊÇ¸ö³£Êı¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l5 level1 lfo3;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ã¿¸ö¶ÔÏóµÄ´óĞ¡»ù±¾ÉÏÊÇËùĞèÊı¾İ½á¹¹µÄ´óĞ¡¡£Ö»ÓĞµ±Êı¾İ½á¹¹µÄ´óĞ¡²»Óë¸ßËÙ»º´æÖĞµÄ»º³åĞĞ¶ÔÆëÊ±£¬²ÅÔö¼ÓÈô¸É×Ö½ÚÊ¹Æä¶ÔÆë¡£ËùÒÔ£¬Ò»¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÉÏµÄËùÓĞ¶ÔÏóµÄÆğÊ¼µØÖ·¶¼±ØÈ»ÊÇ°´¸ßËÙ»º´æÖĞµÄ»º³åĞĞ¶ÔÆëµÄ¡£</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US>(2)</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>»º³åÇø</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ã¿¸ö»º³åÇø¹ÜÀí×ÅÒ»¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Á´±í£¬</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>°´Ğò·ÖÎªÈı×é¡£µÚÒ»×éÊÇÈ«ÂúµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨Ã»ÓĞ¿ÕÏĞµÄ¶ÔÏó£©£¬µÚ¶ş×é</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞÖ»ÓĞ²¿·Ö¶ÔÏó±»·ÖÅä£¬²¿·Ö¶ÔÏó»¹¿ÕÏĞ£¬×îºóÒ»×é</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÄ¶ÔÏóÈ«²¿¿ÕÏĞ¡£Ö»ËùÒÔÕâÑù·Ö×é£¬ÊÇÎªÁË¶Ô</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½øĞĞÓĞĞ§µÄ¹ÜÀí¡£Ã¿¸ö»º³åÇø»¹ÓĞÒ»¸öÂÖ×ªËø£¨</span><span lang=EN-US>spinlock</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£©£¬ÔÚ¶ÔÁ´±í½øĞĞĞŞ¸ÄÊ±ÓÃÕâ¸öÂÖ×ª<span class=GramE>Ëø½øĞĞ</span>Í¬²½¡£ÀàĞÍ</span><span
lang=EN-US>kmem_cache_s</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÔÚ</span><span
lang=EN-US>mm/slab.c</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞ¶¨ÒåÈçÏÂ£º</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>struct</span>
kmem_cache_s {</span></p>

<p class=MsoNormal style='margin-left:22.8pt;mso-outline-level:1'><span
lang=EN-US>/* 1) each alloc &amp; free */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* full, partial first, then free */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>struct</span> list_head<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>slabs_full;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>struct</span> list_head<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>slabs_partial;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>struct</span> list_head<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>slabs_free;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=GramE>unsigned</span>
int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>objsize;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>flags;<span style='mso-spacerun:yes'>&nbsp; </span>/* constant flags */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>num;<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* # of
objs per slab */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>spinlock_t</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spinlock;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>#ifdef
CONFIG_SMP</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;</span>batchcount;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>#endif</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>/* 2) slab
additions /removals */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* order of pgs per slab (2^n) */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>gfporder;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* force GFP flags, e.g. GFP_DMA */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>gfpflags;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>size_t</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>colour;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* cache colouring range */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>colour_off;<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* colour offset */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>colour_next;<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/*
cache colouring */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>kmem_cache_t<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>*slabp_cache;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>growing;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> int<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>dflags;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* dynamic flags */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* constructor func */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>void</span> (*ctor)(void *, kmem_cache_t *, unsigned
long);</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>/* de-constructor func */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>void</span> (*dtor)(void *, kmem_cache_t *, unsigned
long);</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> long<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>failures;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>/* 3) cache
creation/removal */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>char</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name[CACHE_NAMELEN];</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>struct</span> list_head<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>next;</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>#ifdef
CONFIG_SMP</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>/* 4) per-cpu
data */</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=PT-BR style='mso-ansi-language:PT-BR'>cpucache_t<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>*cpudata[NR_CPUS];<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt;mso-outline-level:1'><span
lang=PT-BR style='mso-ansi-language:PT-BR'>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=PT-BR
style='mso-ansi-language:PT-BR'>¡­..<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=PT-BR
style='mso-ansi-language:PT-BR'>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>È»ºó¶¨ÒåÁË</span><span
lang=PT-BR style='mso-ansi-language:PT-BR'>kmem_cache_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-ansi-language:PT-BR'>£¬</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>²¢¸ø²¿·ÖÓò¸³¸øÁË³õÖµ</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-ansi-language:PT-BR'>£º</span><span lang=PT-BR
style='mso-ansi-language:PT-BR'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=PT-BR
style='mso-ansi-language:PT-BR'>static kmem_cache_t cache_cache = {<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=PT-BR
style='mso-ansi-language:PT-BR'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>slabs_full:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>LIST_HEAD_<span
class=GramE>INIT(</span>cache_cache.slabs_full),</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>slabs_partial:<span style='mso-spacerun:yes'>&nbsp; </span>LIST_HEAD_<span
class=GramE>INIT(</span>cache_cache.slabs_partial),</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span>slabs_free:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>LIST_HEAD_<span
class=GramE>INIT(</span>cache_cache.slabs_free),</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>objsize</span>:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>sizeof(kmem_cache_t),</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>flags</span>:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>SLAB_NO_REAP,</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>spinlock</span>:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>SPIN_LOCK_UNLOCKED,</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span>colour_off:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>L1_CACHE_BYTES,</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>name</span>:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>&quot;kmem_cache&quot;,</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span lang=EN-US>};</span></p>

<p class=MsoNormal style='margin-left:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶Ô¸Ã½á¹¹ËµÃ÷ÈçÏÂ£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo4;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸Ã½á¹¹ÖĞÓĞÈı¸ö¶ÓÁĞ</span><span
lang=EN-US>slabs_full</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¡¢</span><span
lang=EN-US>slabs_partial</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÒÔ¼°</span><span
lang=EN-US>slabs_free</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¬·Ö±ğÖ¸ÏòÂú</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¡¢°ëÂú</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ºÍ¿ÕÏĞ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬ÁíÒ»¸ö¶ÓÁĞ</span><span lang=EN-US>next</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ôò°ÑËùÓĞµÄ×¨ÓÃ»º³åÇøÁ´³ÉÒ»¸öÁ´±í¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo4;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>³ıÁËÕâĞ©¶ÓÁĞºÍÖ¸Õë£¬¸Ã½á¹¹ÖĞ»¹ÓĞÒ»Ğ©ÖØÒªµÄÓò£º</span><span
lang=EN-US>objsize</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÊÇÔ­Ê¼µÄÊı¾İ½á¹¹µÄ´óĞ¡£¬ÕâÀï³õÊ¼»¯Îª</span><span
lang=EN-US>kmem_cache_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄ´óĞ¡£»</span><span
lang=EN-US>num</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>±íÊ¾Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÉÏÓĞ¼¸¸ö»º³åÇø£»</span><span lang=EN-US>gfporder</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ôò±íÊ¾Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>´óĞ¡µÄ¶ÔÊı£¬¼´Ã¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÓÉ</span><span lang=EN-US>2 <sup>gfporder</sup></span><span
class=GramE><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¸ö</span></span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ò³Ãæ¹¹³É¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo4;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÈçÇ°ËùÊö<span
class=GramE>£¬×Å</span>É«ÇøµÄÊ¹ÓÃÊÇÎªÁËÊ¹Í¬Ò»»º³åÇøÖĞ²»Í¬</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÉÏµÄ¶ÔÏóÇøµÄÆğÊ¼µØÖ·Ïà»¥´í¿ª£¬ÕâÑùÓĞÁËÀûÓÚ¸ÄÉÆ¸ßËÙ»º´æµÄĞ§ÂÊ¡£</span><span lang=EN-US>colour_off</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>±íÊ¾ÑÕÉ«µÄÆ«ÒÆÁ¿£¬</span><span lang=EN-US>colour</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>±íÊ¾ÑÕÉ«µÄÊıÁ¿£»Ò»¸ö»º³åÇøÖĞÑÕÉ«µÄÊıÁ¿È¡¾öÓÚ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ¶ÔÏóµÄ¸öÊı¡¢Ê£Óà¿Õ¼äÒÔ¼°¸ßËÙ»º´æĞĞµÄ´óĞ¡¡£ËùÒÔ£¬¶ÔÃ¿¸ö»º³åÇø¶¼Òª¼ÆËãËüµÄÑÕÉ«ÊıÁ¿£¬Õâ¸öÊıÁ¿¾Í±£´æÔÚ</span><span
lang=EN-US>colour</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞ£¬¶øÏÂÒ»¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½«ÒªÊ¹ÓÃµÄÑÕÉ«Ôò±£´æÔÚ</span><span lang=EN-US>colour_next</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ¡£µ±</span><span lang=EN-US>colour_next</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>´ïµ½×î´óÖµÊ±£¬¾ÍÓÖ´Ó</span><span lang=EN-US>0</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¿ªÊ¼¡£×ÅÉ«ÇøµÄ´óĞ¡¿ÉÒÔ¸ù¾İ£¨</span><span lang=EN-US>colour_off</span><span
lang=EN-US style='font-family:Symbol;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-char-type:symbol;mso-symbol-font-family:
Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>&acute;</span></span><span
lang=EN-US>colour</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£©ËãµÃ¡£ÀıÈç£¬Èç¹û</span><span lang=EN-US>colour
</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Îª</span><span lang=EN-US>5</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬</span><span lang=EN-US>colour_off</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Îª</span><span lang=EN-US>8</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¬ÔòµÚÒ»¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄÑÕÉ«½«Îª</span><span lang=EN-US>0</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞµÚÒ»¸ö¶ÔÏóÇøµÄÆğÊ¼µØÖ·£¨Ïà¶Ô£©Îª</span><span
lang=EN-US>0</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¬ÏÂÒ»¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÚÒ»¸ö¶ÔÏóÇøµÄÆğÊ¼µØÖ·Îª</span><span lang=EN-US>8</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬ÔÙÏÂÒ»¸öÎª</span><span lang=EN-US>16</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬</span><span lang=EN-US>24</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¬</span><span
lang=EN-US>32</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¬</span><span lang=EN-US>0¡­</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÈ¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l4 level1 lfo4;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>cache_cache</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>±äÁ¿Êµ¼ÊÉÏ¾ÍÊÇ»º³åÇø½á¹¹µÄÍ·Ö¸Õë¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÓÉ´Ë¿ÉÒÔ¿´³ö£¬»º³åÇø½á¹¹</span><span
lang=EN-US>kmem_cache_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ïàµ±ÓÚ</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄ×Ü¿Ø½á¹¹£¬»º³åÇø½á¹¹Óë</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹Ö®¼äµÄ¹ØÏµÈçÍ¼</span><span lang=EN-US>6.12</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ËùÊ¾£º</span></p>

<p class=MsoNormal style='text-indent:21.25pt'><!--[if gte vml 1]><o:wrapblock><v:group
  id="_x0000_s1090" style='position:absolute;left:0;text-align:left;
  margin-left:31.5pt;margin-top:0;width:377.85pt;height:224.1pt;z-index:5'
  coordorigin="1600,5092" coordsize="7557,4482" o:allowincell="f">
  <v:rect id="_x0000_s1091" style='position:absolute;left:1829;top:5092;
   width:1374;height:830'>
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇø</span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:rect><v:roundrect id="_x0000_s1092" style='position:absolute;left:1829;
   top:6586;width:1374;height:664' arcsize="10923f" fillcolor="gray">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:roundrect id="_x0000_s1093" style='position:absolute;left:1829;
   top:7748;width:1374;height:664' arcsize="10923f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:roundrect id="_x0000_s1094" style='position:absolute;left:1829;
   top:8910;width:1374;height:664' arcsize="10923f" filled="f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:line id="_x0000_s1095" style='position:absolute' from="2516,5922"
   to="2516,6586">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1096" style='position:absolute' from="2287,7250"
   to="2287,7748">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1097" style='position:absolute' from="2287,8412"
   to="2287,8910">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1098" style='position:absolute;flip:y' from="2745,8412"
   to="2745,8910">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1099" style='position:absolute;flip:y' from="2745,7250"
   to="2745,7748">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1100" style='position:absolute' from="2971,5922"
   to="2971,6254">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1101" style='position:absolute' from="2971,6251"
   to="3429,6251">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1102" style='position:absolute' from="3432,6251"
   to="3432,8077">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1103" style='position:absolute;flip:x' from="3203,8080"
   to="3432,8080">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1104" style='position:absolute' from="2287,5922"
   to="2287,6420">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1105" style='position:absolute;flip:x' from="1600,6420"
   to="2287,6420">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1106" style='position:absolute' from="1600,6420"
   to="1600,9242">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1107" style='position:absolute' from="1600,9242"
   to="1829,9242">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:rect id="_x0000_s1108" style='position:absolute;left:4806;top:5092;
   width:1374;height:830'>
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇø</span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:rect><v:roundrect id="_x0000_s1109" style='position:absolute;left:4806;
   top:6420;width:1374;height:664' arcsize="10923f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:roundrect id="_x0000_s1110" style='position:absolute;left:4806;
   top:7582;width:1374;height:664' arcsize="10923f" filled="f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:line id="_x0000_s1111" style='position:absolute' from="5264,5922"
   to="5264,6420">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1112" style='position:absolute' from="5264,7084"
   to="5264,7582">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1113" style='position:absolute;flip:y' from="5722,7084"
   to="5722,7582">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1114" style='position:absolute;flip:y' from="5722,5922"
   to="5722,6420">
   <v:stroke dashstyle="1 1" startarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1115" style='position:absolute' from="5264,5922"
   to="5264,6420">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:rect id="_x0000_s1116" style='position:absolute;left:7554;top:5092;
   width:1374;height:830'>
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇø</span></p>
      <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:
      "Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:rect><v:roundrect id="_x0000_s1117" style='position:absolute;left:7554;
   top:6586;width:1374;height:664' arcsize="10923f" fillcolor="gray">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:roundrect id="_x0000_s1118" style='position:absolute;left:7554;
   top:7748;width:1374;height:664' arcsize="10923f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:roundrect id="_x0000_s1119" style='position:absolute;left:7554;
   top:8910;width:1374;height:664' arcsize="10923f" filled="f" fillcolor="#ddd"
   strokecolor="silver">
   <v:textbox>
    <![if !mso]>
    <table cellpadding=0 cellspacing=0 width="100%">
     <tr>
      <td><![endif]>
      <div>
      <p class=MsoNormal><span lang=EN-US>Slab</span><span style='font-family:
      ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span></p>
      </div>
      <![if !mso]></td>
     </tr>
    </table>
    <![endif]></v:textbox>
  </v:roundrect><v:line id="_x0000_s1120" style='position:absolute' from="8241,5922"
   to="8241,6586">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1121" style='position:absolute' from="8012,7250"
   to="8012,7748">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1122" style='position:absolute' from="8012,8412"
   to="8012,8910">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1123" style='position:absolute;flip:y' from="8470,8412"
   to="8470,8910">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1124" style='position:absolute;flip:y' from="8470,7250"
   to="8470,7748">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1125" style='position:absolute' from="8696,5922"
   to="8696,6254">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1126" style='position:absolute' from="8699,6254"
   to="9157,6254">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1127" style='position:absolute' from="9157,6251"
   to="9157,8077">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1128" style='position:absolute;flip:x' from="8928,8080"
   to="9157,8080">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1129" style='position:absolute' from="8012,5922"
   to="8012,6420">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1130" style='position:absolute;flip:x' from="7325,6420"
   to="8012,6420">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1131" style='position:absolute' from="7325,6420"
   to="7325,9242">
   <v:stroke dashstyle="1 1" endcap="round"/>
  </v:line><v:line id="_x0000_s1132" style='position:absolute' from="7325,9242"
   to="7554,9242">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1133" style='position:absolute' from="5035,5922"
   to="5035,6254"/>
  <v:line id="_x0000_s1134" style='position:absolute' from="4577,6254" to="5035,6254"/>
  <v:line id="_x0000_s1135" style='position:absolute' from="4577,6254" to="4577,8080"/>
  <v:line id="_x0000_s1136" style='position:absolute' from="4577,8083" to="4806,8083">
   <v:stroke endarrow="block"/>
  </v:line><v:line id="_x0000_s1137" style='position:absolute' from="3203,5424"
   to="4806,5424">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><v:line id="_x0000_s1138" style='position:absolute' from="6180,5424"
   to="7554,5424">
   <v:stroke dashstyle="1 1" endarrow="block" endcap="round"/>
  </v:line><w:wrap type="topAndBottom"/>
 </v:group><![endif]--><![if !vml]><span style='mso-ignore:vglayout'>
 <table cellpadding=0 cellspacing=0>
  <tr>
   <td width=41 height=0></td>
  </tr>
  <tr>
   <td></td>
   <td><img width=506 height=305 src="6.3.3.files/image003.gif" v:shapes="_x0000_s1090 _x0000_s1091 _x0000_s1092 _x0000_s1093 _x0000_s1094 _x0000_s1095 _x0000_s1096 _x0000_s1097 _x0000_s1098 _x0000_s1099 _x0000_s1100 _x0000_s1101 _x0000_s1102 _x0000_s1103 _x0000_s1104 _x0000_s1105 _x0000_s1106 _x0000_s1107 _x0000_s1108 _x0000_s1109 _x0000_s1110 _x0000_s1111 _x0000_s1112 _x0000_s1113 _x0000_s1114 _x0000_s1115 _x0000_s1116 _x0000_s1117 _x0000_s1118 _x0000_s1119 _x0000_s1120 _x0000_s1121 _x0000_s1122 _x0000_s1123 _x0000_s1124 _x0000_s1125 _x0000_s1126 _x0000_s1127 _x0000_s1128 _x0000_s1129 _x0000_s1130 _x0000_s1131 _x0000_s1132 _x0000_s1133 _x0000_s1134 _x0000_s1135 _x0000_s1136 _x0000_s1137 _x0000_s1138"></td>
  </tr>
 </table>
 </span><![endif]><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
<span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></p>

<p class=MsoNormal style='margin-left:21.25pt;mso-outline-level:1'><span
lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Í¼</span><span lang=EN-US>6.12</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>»º³åÇø½á¹¹</span><span lang=EN-US>kmem_cache_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Óë</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹</span><span
lang=EN-US>slab_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Ö®¼äµÄ¹ØÏµ</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÔÚÍ¼</span><span
lang=EN-US>6.12</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞ£¬Éî»ÒÉ«±íÊ¾È«ÂúµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬Ç³»ÒÉ«±íÊ¾º¬ÓĞ¿ÕÏĞ¶ÔÏóµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬¶øÎŞÉ«±íÊ¾¿ÕµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡£»º³åÇø½á¹¹Ö®¼äĞÎ³ÉÒ»¸öµ¥ÏòÁ´±í£¬</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹Ö®¼äĞÎ³ÉÒ»¸öË«ÏòÁ´±í¡£ÁíÍâ£¬»º³åÇø½á¹¹»¹ÓĞ·Ö±ğÖ¸ÏòÂú¡¢°ëÂú¡¢¿ÕÏĞ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹µÄÖ¸Õë¡£</span></p>

<p class=MsoNormal style='margin-left:21.25pt;mso-outline-level:1'><span
lang=EN-US>2</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£®×¨ÓÃ»º³åÇøµÄ½¨Á¢ºÍ³·Ïú</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>×¨ÓÃ»º³åÇøÊÇÍ¨¹ı</span><span
lang=EN-US>kmem_cache_create</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¨£©º¯Êı½¨Á¢µÄ£¬º¯ÊıÔ­ĞÍÎª£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>kmem_cache_t *kmem_cache_<span
class=GramE>create(</span>const char *name, size_t size, size_t offset,</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>unsigned</span> long c_flags,</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=GramE>void</span> (*ctor) (void *objp, kmem_cache_t *cachep, unsigned
long flags),</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>void</span> (*dtor) (void *objp, kmem_cache_t *cachep,
unsigned long flags))</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶ÔÆä²ÎÊıËµÃ÷ÈçÏÂ£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>name</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º</span> <span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇøÃû</span><span
lang=EN-US> ( 19 </span><span class=GramE><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸ö</span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>×Ö·û</span><span lang=EN-US>) </span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>size</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º</span> <span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶ÔÏó´óĞ¡</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>offset </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£ºËùÇëÇóµÄ×ÅÉ«Æ«ÒÆÁ¿¡£</span> </p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>c_flags </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º¶Ô»º³åÇøµÄÉèÖÃ±êÖ¾£º</span></p>

<p class=MsoNormal style='margin-left:50.65pt'><span lang=EN-US>SLAB_HWCACHE_ALIGN</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º±íÊ¾ÓëµÚÒ»¸ö¸ßËÙ»º´æÖĞµÄ»º³åĞĞ±ß½ç£¨</span><span lang=EN-US>16</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>»ò</span><span lang=EN-US>32</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>×Ö½Ú£©¶ÔÆë¡£</span><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>SLAB_NO_REAP</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º²»ÔÊĞíÏµÍ³»ØÊÕÄÚ´æ</span><span lang=EN-US> </span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>SLAB_CACHE_DMA</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º±íÊ¾</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ê¹ÓÃµÄÊÇ</span><span lang=EN-US>DMA</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÄÚ´æ</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>ctor </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º¹¹Ôìº¯Êı£¨Ò»°ã¶¼Îª</span><span lang=EN-US>NULL) </span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>dtor </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º<span class=GramE>Îö¹¹º¯Êı</span>£¨Ò»°ã¶¼Îª</span><span lang=EN-US>NULL)
</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>objp </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£ºÖ¸Ïò¶ÔÏóµÄÖ¸Õë</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>cachep </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£ºÖ¸Ïò»º³åÇø</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¶Ô×¨ÓÃ»º³åÇøµÄ´´½¨¹ı³Ì¼òÊöÈçÏÂ£º</span></p>

<p class=MsoNormal style='text-indent:22.8pt'><span lang=EN-US>kmem_cache_create</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©º¯ÊıÒª½øĞĞÒ»ÏµÁĞµÄ¼ÆËã£¬ÒÔÈ·¶¨×î¼ÑµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¹¹³É¡£°üÀ¨£ºÃ¿¸ö</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÓÉ¼¸¸öÒ³Ãæ×é³É£¬»®·ÖÎª¶àÉÙ¸ö¶ÔÏó£»</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄÃèÊö½á¹¹</span><span lang=EN-US>slab_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ó¦¸Ã·ÅÔÚ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄÍâÃæ»¹ÊÇ·ÅÔÚ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µÄÎ²²¿£»»¹ÓĞ¡°ÑÕÉ«¡±µÄÊıÁ¿µÈµÈ¡£²¢¸ù¾İµ÷ÓÃ²ÎÊıºÍ¼ÆËã½á¹ûÉèÖÃ</span><span lang=EN-US>kmem_cache_t</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹ÖĞµÄ¸÷¸öÓò£¬°üÀ¨Á½¸öº¯ÊıÖ¸Õë</span><span lang=EN-US>ctor</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ºÍ</span><span lang=EN-US>dtor</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¡£×îºó£¬½«</span><span
lang=EN-US>kmem_cache_t</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½á¹¹²åÈëµ½</span><span
lang=EN-US>cache_cache</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄ</span><span
lang=EN-US>next</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¶ÓÁĞÖĞ¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µ«Çë×¢Òâ£¬º¯Êı</span><span lang=EN-US>kmem_cache_create</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©Ëù´´½¨µÄ»º³åÇøÖĞ»¹Ã»ÓĞ°üº¬ÈÎºÎ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬Òò´Ë£¬Ò²Ã»ÓĞ¿ÕÏĞµÄ¶ÔÏó¡£Ö»ÓĞÒÔÏÂÁ½¸öÌõ¼ş¶¼ÎªÕæÊ±£¬²Å¸ø»º³åÇø·ÖÅä</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£º</span></p>

<p class=MsoNormal style='margin-left:40.2pt;text-indent:-28.8pt;mso-list:l1 level1 lfo5;
tab-stops:list 40.2pt'><![if !supportLists]><span lang=EN-US style='mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>£¨1£©<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÒÑ·¢³öÒ»¸ö·ÖÅäĞÂ¶ÔÏóµÄÇëÇó£»</span></p>

<p class=MsoNormal style='margin-left:40.2pt;text-indent:-28.8pt;mso-list:l1 level1 lfo5;
tab-stops:list 40.2pt'><![if !supportLists]><span lang=EN-US style='mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>£¨2£©<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>»º³åÇø²»°üº¬ÈÎºÎ¿ÕÏĞ¶ÔÏó£»</span></p>

<p class=MsoNormal style='margin-left:11.4pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µ±ÕâÁ½¸öÌõ¼ş¶¼³ÉÁ¢Ê±£¬</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·ÖÅäÄ£Ê½¾Íµ÷ÓÃ</span><span lang=EN-US>kmem_cache_grow</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©º¯Êı¸ø»º³åÇø·ÖÅäÒ»¸öĞÂµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡£ÆäÖĞ£¬¸Ãº¯Êıµ÷ÓÃ</span><span lang=EN-US>kmem_gatepages()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>´Ó»ï°éÏµÍ³»ñµÃÒ»×éÒ³Ãæ£»È»ºóÓÖµ÷ÓÃ</span><span lang=EN-US>kmem_cache_slabgmt()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>»ñµÃÒ»¸öĞÂµÄ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹£»»¹Òªµ÷ÓÃ</span><span lang=EN-US>kmem_cache_init_objs()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÎªĞÂ</span><span lang=EN-US>Slab</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞµÄËùÓĞ¶ÔÏóÉêÇë¹¹Ôì·½·¨£¨Èç¹û¶¨ÒåµÄ»°£©£»×îºó£¬µ÷ÓÃ</span><span
lang=EN-US>kmem_slab_link_end()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>°ÑÕâ¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>½á¹¹²åÈëµ½»º³åÇøÖĞ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Á´±íµÄÄ©Î²¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅäÄ£Ê½µÄ×î´óºÃ´¦¾ÍÊÇ¸øÆµ·±Ê¹ÓÃµÄÊı¾İ½á¹¹½¨Á¢×¨ÓÃ»º³åÇø¡£µ«µ½Ä¿Ç°µÄ°æ±¾ÎªÖ¹£¬</span><span
lang=EN-US>Linux</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÄÚºËÖĞ¶àÊı×¨ÓÃ»º³åÇøµÄ½¨Á¢¶¼ÓÃ</span><span
lang=EN-US>NULL</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>×÷Îª¹¹Ôìº¯ÊıµÄÖ¸Õë£¬ÀıÈç£¬ÎªĞé´æÇø¼ä½á¹¹</span><span
lang=EN-US>vm_area_struct</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½¨Á¢µÄ×¨ÓÃ»º³åÇø</span><span
lang=EN-US>vm_area_cachep</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>vm_area_cachep = kmem_cache_<span
class=GramE>create(</span>&quot;vm_area_struct&quot;,</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>sizeof(</span>struct vm_area_struct), 0,</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>SLAB_HWCACHE_ALIGN, NULL, NULL);</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¾Í°Ñ¹¹ÔìºÍ<span class=GramE>Îö¹¹</span>º¯ÊıµÄÖ¸ÕëÖÃÎª</span><span
lang=EN-US>NULL</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¬Ò²¾ÍÊÇËµ£¬ÄÚºË²¢Ã»ÓĞ³ä·ÖÀûÓÃ</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¹ÜÀí»úÖÆËùÌá¹©µÄºÃ´¦¡£ÎªÁËËµÃ÷ÈçºÎÀûÓÃ×¨ÓÃ»º³åÇø£¬ÎÒÃÇ´ÓÄÚºË´úÂëÖĞÑ¡È¡Ò»¸ö¹¹Ôìº¯Êı²»Îª¿ÕµÄ¼òµ¥Àı×Ó£¬Õâ¸öÀı×ÓÓëÍøÂç×ÓÏµÍ³ÓĞ¹Ø£¬ÔÚ</span><span
lang=EN-US>net/core/buff.c</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞ¶¨Òå£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span><span class=GramE>void</span>
__init<span style='mso-spacerun:yes'>&nbsp; </span>skb_init(void)</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:23.4pt'><span
lang=EN-US>{</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:23.4pt'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span
class=GramE>int<span style='mso-spacerun:yes'>&nbsp; </span>i</span>;</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>skbuff_head_cache
= kmem_cache_<span class=GramE>create(</span>&quot;skbuff_head_cache&quot;,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>sizeof(</span>struct sk_buff),</span></p>

<p class=MsoNormal style='mso-outline-level:1'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>0,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>SLAB_HWCACHE_ALIGN,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>skb_headerinit, NULL);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!skbuff_head_cache)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>panic(</span>&quot;cannot create skbuff cache&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>for</span> (i=0; i&lt;NR_CPUS; i++)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>skb_queue_head_<span class=GramE>init(</span>&amp;skb_head_pool[i].list);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>´Ó´úÂëÖĞ¿ÉÒÔ¿´³ö£¬</span><span lang=EN-US>skb_init</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©µ÷ÓÃ</span><span lang=EN-US>kmem_cache_create</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©ÎªÍøÂç×ÓÏµÍ³½¨Á¢Ò»¸ö</span><span lang=EN-US>sk_buff</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Êı¾İ½á¹¹µÄ×¨ÓÃ»º³åÇø£¬ÆäÃû³ÆÎª¡°</span><span lang=EN-US>skbuff_head_cache</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡±£¨</span> <span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Äã¿ÉÒÔÍ¨¹ı¶ÁÈ¡£¯</span><span
lang=EN-US>proc/slabinfo/</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÎÄ¼şµÃµ½ËùÓĞ»º³åÇøµÄÃû×Ö£©¡£µ÷ÓÃ²ÎÊı</span><span
lang=EN-US>offset</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Îª</span><span lang=EN-US>0</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬±íÊ¾µÚÒ»¸ö¶ÔÏóÔÚ</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÄÎ»ÒÆ²¢ÎŞÌØÊâÒªÇó¡£µ«ÊÇ²ÎÊı</span><span lang=EN-US>flags</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Îª</span><span lang=EN-US>SLAB_HWCACHE_ALIGN</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬±íÊ¾</span><span lang=EN-US>Slab</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞµÄ¶ÔÏóÒªÓë¸ßËÙ»º´æÖĞµÄ»º³åĞĞ±ß½ç¶ÔÆë¡£¶ÔÏóµÄ¹¹Ôìº¯ÊıÎª</span><span lang=EN-US>skb_headerinit</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©£¬<span class=GramE>¶øÎö¹¹º¯Êı</span>Îª¿Õ£¬Ò²¾ÍÊÇËµ£¬ÔÚÊÍ·ÅÒ»¸ö</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Ê±ÎŞĞè¶Ô¸÷¸ö»º³åÇø½øĞĞÌØÊâµÄ´¦Àí¡£</span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µ±´ÓÄÚºËĞ¶ÔØÒ»¸öÄ£¿éÊ±£¬Í¬Ê±Ó¦µ±³·ÏúÎªÕâ¸öÄ£¿éÖĞµÄÊı¾İ½á¹¹Ëù½¨Á¢µÄ»º³åÇø£¬ÕâÊÇÍ¨¹ıµ÷ÓÃ</span><span
lang=EN-US>kmem_cache_destroy()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>º¯ÊıÀ´Íê³ÉµÄ¡£´Ó</span><span
lang=EN-US>Linux<st1:chsdate Year="1899" Month="12" Day="30" IsLunarDate="False"
IsROCDate="False" w:st="on">2.4.16</st1:chsdate></span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÄÚºË´úÂëÖĞ½øĞĞ²éÕÒ£¬¶ÔÕâ¸öº¯ÊıµÄµ÷ÓÃ·Ç³£ÉÙ¡£</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-outline-level:1'><span lang=EN-US>3</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£®Í¨ÓÃ»º³åÇø</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÔÚÄÚºËÖĞ³õÊ¼»¯¿ªÏú²»´óµÄÊı¾İ½á¹¹¿ÉÒÔºÏÓÃÒ»¸öÍ¨ÓÃµÄ»º³åÇø¡£Í¨ÓÃ»º³åÇø·Ç³£ÀàËÆÓÚÎïÀíÒ³Ãæ·ÖÅäÖĞµÄ´óĞ¡·ÖÇø£¬×îĞ¡µÄÎª</span><span
lang=EN-US>32</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¬È»ºóÒÀ´ÎÎª</span><span lang=EN-US>64</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡¢</span><span lang=EN-US>128</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¡¢</span><span
lang=EN-US>¡­</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Ö±ÖÁ</span><span lang=EN-US>128K</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨¼´</span><span lang=EN-US>32</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸öÒ³Ãæ£©£¬µ«ÊÇ£¬¶ÔÍ¨ÓÃ»º³åÇøµÄ¹ÜÀíÓÖ²ÉÓÃµÄÊÇ</span><span
lang=EN-US>Slab</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·½Ê½¡£´ÓÍ¨ÓÃ»º³åÇøÖĞ·ÖÅäºÍÊÍ·Å»º³åÇøµÄº¯ÊıÎª£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:24.0pt'><span
class=GramE><span lang=EN-US>void</span></span><span lang=EN-US>
*kmalloc(size_t size, int flags);</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:24.0pt'><span
class=GramE><span lang=EN-US>Void<span style='mso-spacerun:yes'>&nbsp;
</span>kree</span></span><span lang=EN-US>(const void *objp);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Òò´Ë£¬µ±Ò»¸öÊı¾İ½á¹¹µÄÊ¹ÓÃ¸ù±¾²»Æµ·±Ê±£¬»òÆä´óĞ¡²»×ãÒ»¸öÒ³ÃæÊ±£¬¾ÍÃ»ÓĞ±ØÒª¸øÆä·ÖÅä×¨ÓÃ»º³åÇø£¬¶øÓ¦¸Ãµ÷ÓÃ</span><span
lang=EN-US>kmallo()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>½øĞĞ·ÖÅä¡£Èç¹ûÊı¾İ½á¹¹µÄ´óĞ¡½Ó½üÒ»¸öÒ³Ãæ£¬Ôò¸É´àÍ¨¹ı</span><span
lang=EN-US>alloc_page()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÎªÖ®·ÖÅäÒ»¸öÒ³Ãæ¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÊÂÊµÉÏ£¬ÔÚÄÚºËÖĞ£¬ÓÈÆäÊÇÇı¶¯³ÌĞòÖĞ£¬ÓĞ´óÁ¿µÄÊı¾İ½á¹¹½ö½öÊÇÒ»´ÎĞÔÊ¹ÓÃ£¬¶øÇÒËùÕ¼ÄÚ´æÖ»ÓĞ¼¸Ê®¸ö×Ö½Ú£¬Òò´Ë£¬Ò»°ãÇé¿öÏÂµ÷ÓÃ</span><span
lang=EN-US>kmallo()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸øÄÚºËÊı¾İ½á¹¹·ÖÅäÄÚ´æ¾Í×ã¹»ÁË¡£ÁíÍâ£¬ÒòÎª£¬ÔÚ</span><span
lang=EN-US>Linux2.0</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÒÔÇ°µÄ°æ±¾Ò»°ã¶¼µ÷ÓÃ</span><span
lang=EN-US>kmallo()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸øÄÚºËÊı¾İ½á¹¹·ÖÅäÄÚ´æ£¬Òò´Ë£¬µ÷ÓÃ¸Ãº¯ÊıµÄÒ»¸öÓÅµãÊÇ£¨ÈÃÄã¿ª·¢µÄÇı¶¯³ÌĞò£©ÄÜ±£³ÖÏòºó¼æÈİ¡£</span></p>

<p class=MsoNormal style='mso-outline-level:1'><st1:chsdate Year="1899"
Month="12" Day="30" IsLunarDate="False" IsROCDate="False" w:st="on"><span
 lang=EN-US>6.3.4</span></st1:chsdate><span lang=EN-US> </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÄÚºË¿Õ¼ä·ÇÁ¬ĞøÄÚ´æÇøµÄ¹ÜÀí</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÎÒÃÇËµ£¬ÈÎºÎÊ±ºò£¬</span><span lang=EN-US>CPU</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÃÎÊµÄ¶¼ÊÇĞéÄâÄÚ´æ£¬ÄÇÃ´£¬ÔÚÄã±àĞ´Çı¶¯³ÌĞò£¬»òÕß±àĞ´Ä£¿éÊ±£¬</span><span lang=EN-US>Linux</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¸øÄã·ÖÅäÊ²Ã´ÑùµÄÄÚ´æ£¿Ëü´¦ÓÚ</span><st1:chmetcnv UnitName="g"
SourceValue="4" HasSpace="False" Negative="False" NumberType="1" TCSC="0"
w:st="on"><span lang=EN-US>4G</span></st1:chmetcnv><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¿Õ¼äµÄÊ²Ã´Î»ÖÃ£¿Õâ¾ÍÊÇÎÒÃÇÒªÌÖÂÛµÄ·ÇÁ¬ĞøÄÚ´æ¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Ê×ÏÈ£¬·ÇÁ¬ĞøÄÚ´æ´¦ÓÚ</span><st1:chmetcnv
UnitName="g" SourceValue="3" HasSpace="False" Negative="False" NumberType="1"
TCSC="0" w:st="on"><span lang=EN-US>3G</span></st1:chmetcnv><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>µ½</span><st1:chmetcnv UnitName="g" SourceValue="4"
HasSpace="False" Negative="False" NumberType="1" TCSC="0" w:st="on"><span
 lang=EN-US>4G</span></st1:chmetcnv><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ö®¼ä£¬Ò²¾ÍÊÇ´¦ÓÚÄÚºË¿Õ¼ä£¬ÈçÍ¼</span><span
lang=EN-US>6.13</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ËùÊ¾£º</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>high_memory </span></p>

<p class=MsoNormal><!--[if gte vml 1]><v:group id="_x0000_s1070" style='position:absolute;
 left:0;text-align:left;margin-left:34.35pt;margin-top:0;width:377.85pt;
 height:81.05pt;z-index:4' coordorigin="1651,1595" coordsize="7557,1621"
 o:allowincell="f">
 <v:roundrect id="_x0000_s1071" style='position:absolute;left:1651;top:2246;
  width:1603;height:830' arcsize="10923f" filled="f">
  <v:textbox>
   <![if !mso]>
   <table cellpadding=0 cellspacing=0 width="100%">
    <tr>
     <td><![endif]>
     <div>
     <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
     mso-hansi-font-family:"Times New Roman"'>ÎïÀíÄÚ´æÇø</span></p>
     <p class=MsoNormal><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
     mso-hansi-font-family:"Times New Roman"'>µÄÓ³Éä</span></p>
     </div>
     <![if !mso]></td>
    </tr>
   </table>
   <![endif]></v:textbox>
 </v:roundrect><v:roundrect id="_x0000_s1072" style='position:absolute;left:4628;
  top:2246;width:1145;height:830' arcsize="10923f" filled="f"/>
 <v:roundrect id="_x0000_s1073" style='position:absolute;left:6689;top:2246;
  width:1145;height:830' arcsize="10923f" filled="f"/>
 <v:line id="_x0000_s1074" style='position:absolute' from="1651,2249" to="8292,2249"/>
 <v:line id="_x0000_s1075" style='position:absolute' from="1651,3063" to="8292,3063"/>
 <v:line id="_x0000_s1076" style='position:absolute' from="1651,2249" to="1651,3079"/>
 <v:line id="_x0000_s1077" style='position:absolute' from="3254,2552" to="4628,2552">
  <v:stroke startarrow="block" endarrow="block"/>
 </v:line><v:line id="_x0000_s1078" style='position:absolute' from="5773,2552"
  to="6689,2552">
  <v:stroke startarrow="block" endarrow="block"/>
 </v:line><v:line id="_x0000_s1079" style='position:absolute;flip:x' from="8292,2884"
  to="8521,3216"/>
 <v:line id="_x0000_s1080" style='position:absolute;flip:x' from="8532,2884"
  to="8761,3216"/>
 <v:line id="_x0000_s1081" style='position:absolute;flip:x' from="8292,2080"
  to="8521,2412"/>
 <v:line id="_x0000_s1082" style='position:absolute;flip:x' from="8521,2080"
  to="8750,2412"/>
 <v:line id="_x0000_s1083" style='position:absolute' from="8750,3050" to="9208,3050"/>
 <v:line id="_x0000_s1084" style='position:absolute' from="8750,2233" to="9208,2233"/>
 <v:line id="_x0000_s1085" style='position:absolute' from="9208,2249" to="9208,3079"/>
 <v:line id="_x0000_s1086" style='position:absolute' from="1651,1930" to="1651,2262">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1087" style='position:absolute' from="3274,1595"
  to="3274,2233">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1088" style='position:absolute' from="4628,1914"
  to="4628,2246">
  <v:stroke endarrow="block"/>
 </v:line><v:line id="_x0000_s1089" style='position:absolute' from="9208,1914"
  to="9208,2246">
  <v:stroke endarrow="block"/>
 </v:line></v:group><![endif]--><![if !vml]><span style='mso-ignore:vglayout;
position:relative;z-index:4'><span style='left:0px;position:absolute;
left:40px;top:-1px;width:516px;height:110px'><img width=516 height=110
src="6.3.3.files/image004.gif" v:shapes="_x0000_s1070 _x0000_s1071 _x0000_s1072 _x0000_s1073 _x0000_s1074 _x0000_s1075 _x0000_s1076 _x0000_s1077 _x0000_s1078 _x0000_s1079 _x0000_s1080 _x0000_s1081 _x0000_s1082 _x0000_s1083 _x0000_s1084 _x0000_s1085 _x0000_s1086 _x0000_s1087 _x0000_s1088 _x0000_s1089"></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>PAGE_OFFSET<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>VMALLOC_START<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>4GB</span></p>

<p class=MsoNormal><!--[if gte vml 1]><o:wrapblock><v:line id="_x0000_s1069"
  style='position:absolute;left:0;text-align:left;z-index:3' from="34.35pt,0"
  to="377.85pt,0" o:allowincell="f" stroked="f">
  <w:wrap type="topAndBottom"/>
 </v:line><![endif]--><!--[if gte vml 1]></o:wrapblock><![endif]--><br
style='mso-ignore:vglayout' clear=ALL>
</p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>8MB<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÄÚ´æÇø</span><span lang=EN-US><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>4KB<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÄÚ´æÇø</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Í¼</span><span lang=EN-US>6.13 </span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>´Ó</span><span
lang=EN-US>PAGE_OFFSET</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¿ªÊ¼µÄÄÚºËµØÖ·Çø¼ä</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Í¼ÖĞ£¬</span><span lang=EN-US>PAGE_OFFSET</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Îª</span><span lang=EN-US>3GB</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¬</span><span
lang=EN-US>high_memory</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Îª±£´æÎïÀíµØÖ·×î¸ßÖµµÄ±äÁ¿£¬</span><span
lang=EN-US>VMALLOC_START</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Îª·ÇÁ¬ĞøÇøµÄ<span
class=GramE>µÄ</span>ÆğÊ¼µØÖ·£¬¶¨ÒåÓÚ</span><span lang=EN-US>include</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¯</span><span lang=EN-US>i386/pgtable.h</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ£º</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#define VMALLOC_<span
class=GramE>OFFSET<span style='mso-spacerun:yes'>&nbsp; </span>(</span>8*1024*1024)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#define VMALLOC_START<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>(((unsigned long) high_memory +
2*VMALLOC_OFFSET-1) &amp; \<span class=GramE>~(</span>VMALLOC_OFFSET-1))</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÔÚÎïÀíµØÖ·µÄÄ©Î²ÓëµÚÒ»¸öÄÚ´æÇøÖ®¼ä²åÈëÁËÒ»¸ö</span><span lang=EN-US>8MB</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨</span><span lang=EN-US>VMALLOC_OFFSET</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£©µÄÇø¼ä£¬ÕâÊÇÒ»¸ö°²È«Çø£¬Ä¿µÄÊÇÎªÁË¡°²¶»ñ¡±¶Ô·ÇÁ¬ĞøÇøµÄ·Ç·¨·ÃÎÊ¡£³öÓÚÍ¬ÑùµÄÀíÓÉ£¬ÔÚÆäËû·ÇÁ¬ĞøµÄÄÚ´æÇøÖ®¼äÒ²²åÈëÁË</span><span
lang=EN-US>4K</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>´óĞ¡µÄ°²È«Çø¡£<span class=GramE>Ã¿¸ö·Ç</span>Á¬ĞøÄÚ´æÇøµÄ´óĞ¡¶¼ÊÇ</span><span
lang=EN-US>4096</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>µÄ±¶Êı¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>1</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£®·ÇÁ¬ĞøÇøµÄÊı¾İ½á¹¹</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span class=GramE><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÃèÊö·Ç</span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Á¬ĞøÇøµÄÊı¾İ½á¹¹Îª</span><span lang=EN-US>struct vm_struct</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¬¶¨ÒåÓÚ</span><span lang=EN-US>include/linux/vmalloc.h</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ£º</span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span class=GramE><span
lang=EN-US>struct</span></span><span lang=EN-US> vm_struct {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>unsigned</span> long flags;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>void</span> * addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>unsigned</span> long size;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>struct</span> vm_struct * next;</span></p>

<p class=MsoNormal style='text-indent:21.25pt'><span lang=EN-US>};</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span><span class=GramE>struct</span> vm_struct * vmlist;</span></p>

<p class=MsoNormal style='text-indent:22.2pt'><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>·ÇÁ¬ĞøÇø×é³ÉÒ»¸öµ¥Á´±í£¬Á´±íµÚÒ»¸öÔªËØµÄµØÖ·´æ·ÅÔÚ±äÁ¿</span><span
lang=EN-US>vmlist</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>ÖĞ¡£</span><span lang=EN-US>Addr</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÓòÊÇÄÚ´æÇøµÄÆğÊ¼µØÖ·£»</span><span lang=EN-US>size</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÊÇÄÚ´æÇøµÄ´óĞ¡¼Ó</span><span lang=EN-US>4096(</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>°²È«ÇøµÄ´óĞ¡</span><span lang=EN-US>)</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡£</span></p>

<p class=MsoNormal><span lang=EN-US>2</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£®´´½¨Ò»¸ö·ÇÁ¬ĞøÇøµÄ½á¹¹</span><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>º¯Êı</span><span lang=EN-US>get_vm_area</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©´´½¨Ò»¸öĞÂµÄ·ÇÁ¬ĞøÇø½á¹¹£¬Æä´úÂëÔÚ</span><span lang=EN-US>mm/vmalloc.c</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ£º</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span><span class=GramE>struct</span> vm_struct * get_vm_area(unsigned long
size, unsigned long flags)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>unsigned</span> long addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>struct</span> vm_struct **p, *tmp, *area;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span> = (struct vm_struct *)
kmalloc(sizeof(*area), GFP_KERNEL);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!area)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> NULL;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>size</span> += PAGE_SIZE;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>addr</span> = VMALLOC_START;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>write_<span class=GramE>lock(</span>&amp;vmlist_lock);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>for</span> (p = &amp;vmlist; (tmp = *p) ; p = &amp;tmp-&gt;next) {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> ((size + addr) &lt; addr)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> out;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (size + addr &lt;= (unsigned long)
tmp-&gt;addr)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=GramE>break</span>;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>addr</span> = tmp-&gt;size + (unsigned long)
tmp-&gt;addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (addr &gt; VMALLOC_END-size)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>goto</span> out;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span>-&gt;flags = flags;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span>-&gt;addr = (void *)addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span>-&gt;size = size;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span>-&gt;next = *p;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>*p = area;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>write_<span class=GramE>unlock(</span>&amp;vmlist_lock);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> area;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span class=GramE><span lang=EN-US>out</span></span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>write_<span class=GramE>unlock(</span>&amp;vmlist_lock);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>kfree(</span>area);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> NULL;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Õâ¸öº¯Êı±È½Ï¼òµ¥£¬¾ÍÊÇÔÚµ¥Á´±íÖĞ²åÈëÒ»¸öÔªËØ¡£ÆäÖĞµ÷ÓÃÁË</span><span
lang=EN-US>kmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ºÍ</span><span
lang=EN-US>kfree()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>º¯Êı</span><span
lang=EN-US>,</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>·Ö±ğÓÃÀ´Îª</span><span lang=EN-US>vm_struct</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>½á¹¹·ÖÅäÄÚ´æºÍÊÍ·ÅËù·ÖÅäµÄÄÚ´æ¡£</span></p>

<p class=MsoNormal><span lang=EN-US>3</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£®·ÖÅä·ÇÁ¬ĞøÄÚ´æÇø</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>vmalloc</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¨£©º¯Êı¸øÄÚºË·ÖÅäÒ»¸ö·ÇÁ¬ĞøµÄÄÚ´æÇø£¬ÔÚ</span><span
lang=EN-US>/include/linux/vmalloc.h</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞ¶¨ÒåÈçÏÂ£º</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span><span class=GramE>static</span> inline void * vmalloc (unsigned long
size)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> __vmalloc(size, GFP_KERNEL | __GFP_HIGHMEM,
PAGE_KERNEL);</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>vmalloc</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>£¨£©×îÖÕµ÷ÓÃµÄÊÇ</span><span lang=EN-US>__vmalloc</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©º¯Êı£¬¸Ãº¯ÊıµÄ´úÂëÔÚ</span><span lang=EN-US>mm/vmalloc.c</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>ÖĞ£º</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span><span class=GramE>void</span> * __vmalloc (unsigned long size, int
gfp_mask, pgprot_t prot)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>void</span> * addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>struct</span> vm_struct *area;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>size</span> = PAGE_ALIGN(size);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!size || (size &gt;&gt; PAGE_SHIFT) &gt;
num_physpages) {</span></p>

<p class=MsoNormal style='mso-outline-level:1'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>BUG(</span>);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> NULL;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>area</span> = get_vm_area(size, VM_ALLOC);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!area)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> NULL;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>addr</span> = area-&gt;addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (vmalloc_area_pages(VMALLOC_VMADDR(addr),
size, gfp_mask, prot)) {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>vfree(</span>addr);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>return</span> NULL;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=GramE>return</span> addr;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>º¯ÊıÊ×ÏÈ°Ñ</span><span lang=EN-US>size</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>²ÎÊıÈ¡ÕûÎªÒ³Ãæ´óĞ¡£¨</span><span lang=EN-US>4096</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£©µÄÒ»¸ö±¶Êı£¬Ò²¾ÍÊÇ°´Ò³µÄ´óĞ¡½øĞĞ¶ÔÆë£¬È»ºó½øĞĞÓĞĞ§ĞÔ¼ì²é£¬Èç¹ûÓĞ´óĞ¡ºÏÊÊµÄ¿ÉÓÃÄÚ´æ£¬¾Íµ÷ÓÃ</span><span
lang=EN-US>get_vm_area</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¨£©»ñµÃÒ»¸öÄÚ´æÇøµÄ½á¹¹¡£µ«ÕæÕıµÄÄÚ´æÇø»¹Ã»ÓĞ»ñµÃ£¬º¯Êı</span><span
lang=EN-US>vmalloc_area_pages</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£¨£©ÕæÕı½øĞĞ·ÇÁ¬ĞøÄÚ´æÇøµÄ·ÖÅä£º</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=GramE>inline</span>
int vmalloc_area_pages (unsigned long address, unsigned long size,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>int</span> gfp_mask, pgprot_t prot)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>pgd_t * dir;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>unsigned</span> long
end = address + size;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>int</span> ret;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>dir</span> = pgd_offset_k(address);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_<span class=GramE>lock(</span>&amp;init_mm.page_table_lock);</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:21.25pt'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span><span class=GramE>do</span>
{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;</span>pmd_t *pmd;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>pmd</span> = pmd_alloc(&amp;init_mm, dir, address);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>ret</span> = -ENOMEM;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (!pmd)</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>break</span>;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>ret</span> = -ENOMEM;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>if</span> (alloc_area_pmd(pmd, address, end - address,
gfp_mask, prot))</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>break</span>;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>address</span> = (address + PGDIR_SIZE) &amp;
PGDIR_MASK;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>dir</span>++;</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span class=GramE>ret</span> = 0;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>} while (address &amp;&amp; (address &lt; end));</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>spin_<span class=GramE>unlock(</span>&amp;init_mm.page_table_lock);</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span><span class=GramE>return</span>
ret;</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¸Ãº¯ÊıÓĞÁ½¸öÖ÷ÒªµÄ²ÎÊı£¬</span><span
lang=EN-US>address</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>±íÊ¾ÄÚ´æÇøµÄÆğÊ¼µØÖ·£¬</span><span
lang=EN-US>size</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>±íÊ¾ÄÚ´æÇøµÄ´óĞ¡¡£ÄÚ´æÇøµÄÄ©Î²µØÖ·¸³¸øÁË¾Ö²¿±äÁ¿</span><span
lang=EN-US>end</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¡£ÆäÖĞ»¹µ÷ÓÃÁË¼¸¸öÖ÷ÒªµÄº¯Êı»òºê£º</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l2 level1 lfo6;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>pgd_offset_k</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©ºêµ¼³öÕâ¸öÄÚ´æÇøÆğÊ¼µØÖ·ÔÚÒ³Ä¿Â¼ÖĞµÄÄ¿Â¼Ïî£»</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l2 level1 lfo6;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>pmd_alloc</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©ÎªĞÂµÄÄÚ´æÇø´´½¨Ò»¸öÖĞ¼äÒ³Ä¿Â¼£»</span></p>

<p class=MsoNormal style='margin-left:21.25pt;text-indent:-21.25pt;mso-list:
l2 level1 lfo6;tab-stops:list 21.25pt'><![if !supportLists]><span lang=EN-US
style='font-family:ËÎÌå;mso-hansi-font-family:Wingdings;mso-bidi-font-family:
ËÎÌå'><span style='mso-list:Ignore'>¡¤<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>alloc_area_pmd</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©ÎªĞÂµÄÖĞ¼äÒ³Ä¿Â¼·ÖÅäËùÓĞÏà¹ØµÄÒ³±í£¬²¢¸üĞÂÒ³µÄ×ÜÄ¿Â¼£»¸Ãº¯Êıµ÷ÓÃ</span><span lang=EN-US>pte_alloc_kernel()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>º¯ÊıÀ´·ÖÅäÒ»¸öĞÂµÄÒ³±í£¬Ö®ºóÔÙµ÷ÓÃ</span><span lang=EN-US>alloc_area_pte</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©ÎªÒ³±íÏî·ÖÅä¾ßÌåµÄÎïÀíÒ³Ãæ¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>´Ó</span><span lang=EN-US>vmalloc_area_pages</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£¨£©º¯Êı¿ÉÒÔ¿´³ö£¬¸Ãº¯ÊıÊµ¼Ê½¨Á¢ÆğÁË·ÇÁ¬ĞøÄÚ´æÇøµ½ÎïÀíÒ³ÃæµÄÓ³Éä¡£</span></p>

<p class=MsoNormal><span lang=EN-US>4</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>£®</span><span
lang=EN-US>kmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Óë</span><span
lang=EN-US>vmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>µÄÇø±ğ</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>kmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Óë</span><span lang=EN-US>vmalloc() </span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¶¼ÊÇÔÚÄÚºË´úÂëÖĞÌá¹©¸øÆäËû×ÓÏµÍ³ÓÃÀ´·ÖÅäÄÚ´æµÄº¯Êı£¬µ«¶şÕßÓĞºÎÇø±ğ£¿</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>´ÓÇ°ÃæµÄ½éÉÜÒÑ¾­¿´³ö£¬ÕâÁ½¸öº¯ÊıËù·ÖÅäµÄÄÚ´æ¶¼´¦ÓÚÄÚºË¿Õ¼ä£¬¼´´Ó</span><span
lang=EN-US>3GB</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>¡«</span><span lang=EN-US>4GB</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>£»µ«Î»ÖÃ²»Í¬£¬</span><span lang=EN-US>kmalloc()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅäµÄÄÚ´æ´¦ÓÚ</span><span lang=EN-US>3GB</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡«</span><span lang=EN-US>high_memory</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>Ö®¼ä£¬¶ø</span><span lang=EN-US>vmalloc()</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>·ÖÅäµÄÄÚ´æÔÚ</span><span lang=EN-US>VMALLOC_START</span><span
style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman"'>¡«</span><span lang=EN-US>4GB</span><span style='font-family:
ËÎÌå;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ö®¼ä£¬Ò²¾ÍÊÇ·ÇÁ¬ĞøÄÚ´æÇø¡£Ò»°ãÇé¿öÏÂÔÚÇı¶¯³ÌĞòÖĞ¶¼ÊÇµ÷ÓÃ</span><span
lang=EN-US>kmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>À´¸øÊı¾İ½á¹¹·ÖÅäÄÚ´æ£¬¶ø</span><span
lang=EN-US>vmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÓÃÔÚÎª»î¶¯µÄ½»»»Çø·ÖÅäÊı¾İ½á¹¹£¬ÎªÄ³Ğ©</span><span
lang=EN-US>I/O</span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Çı¶¯³ÌĞò·ÖÅä»º³åÇø£¬»òÎªÄ£¿é·ÖÅä¿Õ¼ä£¬ÀıÈçÔÚ</span><span
lang=EN-US>include/asm-i386/module.h</span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ÖĞ¶¨ÒåÁËÈçÏÂÓï¾ä£º</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>#define module_map(x)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>vmalloc(x)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:ËÎÌå;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>Æäº¬Òå¾ÍÊÇ°ÑÄ£¿éÓ³Éäµ½·ÇÁ¬ĞøµÄÄÚ´æÇø¡£</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:ËÎÌå;
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Óë</span><span
lang=EN-US>kmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ºÍ</span><span
lang=EN-US>vmalloc()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>Ïà¶ÔÓ¦£¬Á½¸öÊÍ·ÅÄÚ´æµÄº¯ÊıÎª</span><span
lang=EN-US>kfree()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>ºÍ</span><span
lang=EN-US>vfree()</span><span style='font-family:ËÎÌå;mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>¡£</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

</body>


<!-- Mirrored from www.kerneltravel.net/kernel-book/ç¬¬å…­ç« %20Linuxå†…å­˜ç®¡ç†/6.3.3.htm by HTTrack Website Copier/3.x [XR&CO'2008], Sat, 29 Dec 2012 03:00:41 GMT -->
</html>
